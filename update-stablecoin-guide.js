const axios = require('axios');

const DIRECTUS_URL = 'http://localhost:8055';

/**
 * å»ºè®®ï¼šæŠŠè´¦å·å¯†ç æ”¹ä¸ºç¯å¢ƒå˜é‡è¯»å–ï¼Œé¿å…æ³„æ¼
 * const DIRECTUS_EMAIL = process.env.DIRECTUS_EMAIL
 * const DIRECTUS_PASSWORD = process.env.DIRECTUS_PASSWORD
 */

const GUIDE_CONFIG = {
  // ===== åŸºæœ¬ä¿¡æ¯ =====
  title: 'å€Ÿè´·æŒ–æ¯ï¼ˆLendingï¼‰å®Œå…¨æŒ‡å—',
  slug: 'lending-yield-complete-guide',
  summary: 'ä¸€ç«™å¼æŒæ¡ DeFi å€Ÿè´·çš„ä¾›ç»™/å€Ÿå…¥ã€å¥åº·å› å­ã€æ¸…ç®—é˜ˆå€¼ã€å¥—å¨ƒæ æ†ä¸é£é™©æ§åˆ¶ï¼Œå«å¹³å°é€‰æ‹©ä¸å®æ“æ¸…å•ã€‚',

  // åœ¨ Directus ä¸­æ›¿æ¢ä¸ºçœŸå®åˆ†ç±» ID
  category: 'fab597a5-2d87-479a-8682-be30d95e925a',

  // ä¸€çº§åˆ†ç±»ï¼ˆæ¨¡æ¿é™å®šå¯ç”¨å€¼ï¼šairdrop / yield / liquidity / tools / nftï¼‰
  category_l1: 'yield',
  // äºŒçº§åˆ†ç±»
  category_l2: 'LST è´¨æŠ¼',

  // ===== å…ƒæ•°æ® =====
  difficulty_level: 3,  // 1-5ï¼ˆ3=ä¸­ç­‰ï¼‰
  risk_level: 3,        // 1-5ï¼ˆ3=ä¸­ç­‰ï¼‰
  apy_min: 3,
  apy_max: 20,

  // èµ„é‡‘/æ—¶é—´/æŠ€æœ¯é—¨æ§›
  threshold_capital: '100-5000 USD',
  threshold_capital_min: 100,
  time_commitment: 'æ¯å‘¨ 1-2 å°æ—¶',
  time_commitment_minutes: 90,
  threshold_tech_level: 'intermediate', //beginner (åˆçº§) / intermediate (ä¸­çº§) / advanced (é«˜çº§)

  // ===== å¯è¯»æ€§å¼ºçš„ Markdown æ­£æ–‡ =====
  content: `> **é€‚ç”¨äººç¾¤**ï¼šå¸Œæœ›ç”¨ USDT/USDC/DAI ç­‰ç¨³å®šå¸æˆ–ä¸»æµèµ„äº§åœ¨é“¾ä¸Šè¿›è¡Œâ€œå‡ºå€Ÿèµšåˆ©æ¯/åšæŠµæŠ¼å€Ÿå¸å†å¾ªç¯â€çš„ç”¨æˆ·  
> **é˜…è¯»æ—¶é—´**ï¼šâ‰ˆ 8â€“12 åˆ†é’Ÿ  
> **å…³é”®è¯**ï¼šä¾›ç»™ï¼ˆSupplyï¼‰/ å€Ÿå…¥ï¼ˆBorrowï¼‰/ è´·æ¬¾ä»·å€¼æ¯”ï¼ˆLTVï¼‰/ å¥åº·å› å­ï¼ˆHealth Factorï¼‰/ æ¸…ç®— / å˜é‡åˆ©ç‡ vs ç¨³å®šåˆ©ç‡

---

## ğŸ§­ TL;DR
- **æœ€ç®€å•åšæ³•**ï¼šæŠŠç¨³å®šå¸ \\*Supply åˆ° Aave/Compound\\*ï¼Œèµšå¯å˜åˆ©æ¯ï¼ˆ3â€“10% å¹´åŒ–ï¼‰ã€‚  
- **è¿›é˜¶æ”¶ç›Š**ï¼š\\*æŠµæŠ¼ â†’ å€Ÿå…¥ â†’ å†ä¾›ç»™\\*ï¼ˆå¾ªç¯/å¥—å¨ƒï¼‰æå‡ APYï¼Œä½†å¢åŠ æ¸…ç®—é£é™©ã€‚  
- **æ ¸å¿ƒé£æ§**ï¼šç›¯ä½ **å¥åº·å› å­**ã€**æ¸…ç®—é˜ˆå€¼**ã€**åˆ©ç‡æ¨¡å‹** å’Œ **é¢„è¨€æœºä»·æ ¼**ã€‚  
- **åˆ†æ•£å¹³å°ä¸é“¾**ï¼Œå¹¶è®¾ç½®è‡ªåŠ¨åŒ–æé†’ï¼ˆä»·æ ¼/å¥åº·å› å­/åˆ©ç‡é˜ˆå€¼ï¼‰ã€‚

---

## ğŸ—‚ ç›®å½•
1. [ä»€ä¹ˆæ˜¯å€Ÿè´·æŒ–æ¯](#ä»€ä¹ˆæ˜¯å€Ÿè´·æŒ–æ¯)
2. [åˆ©ç‡ä¸æ¨¡å‹ï¼šå¯å˜/ç¨³å®šã€åˆ©ç”¨ç‡æ›²çº¿](#åˆ©ç‡ä¸æ¨¡å‹å¯å˜ç¨³å®šåˆ©ç”¨ç‡æ›²çº¿)
3. [å…³é”®æŒ‡æ ‡ï¼šLTV/æ¸…ç®—é˜ˆå€¼/å¥åº·å› å­](#å…³é”®æŒ‡æ ‡ltvæ¸…ç®—é˜ˆå€¼å¥åº·å› å­)
4. [ä¸‰ç§å…¸å‹ç©æ³•](#ä¸‰ç§å…¸å‹ç©æ³•)
5. [ä¸‰æ­¥æé€Ÿä¸Šæ‰‹](#ä¸‰æ­¥æé€Ÿä¸Šæ‰‹)
6. [è¿›é˜¶ï¼šå¾ªç¯åŠ æ æ†çš„è§„åˆ™](#è¿›é˜¶å¾ªç¯åŠ æ æ†çš„è§„åˆ™)
7. [é£é™©çŸ©é˜µä¸è§„é¿æ¸…å•](#é£é™©çŸ©é˜µä¸è§„é¿æ¸…å•)
8. [å·¥å…·ä¸å¹³å°å¯¼èˆª](#å·¥å…·ä¸å¹³å°å¯¼èˆª)
9. [FAQ](#faq)
10. [ä¸€é¡µæ‰§è¡Œæ¸…å•](#ä¸€é¡µæ‰§è¡Œæ¸…å•)

---

## ğŸ“˜ ä»€ä¹ˆæ˜¯å€Ÿè´·æŒ–æ¯
**å€Ÿè´·æŒ–æ¯ï¼ˆLendingï¼‰**ï¼šåœ¨å»ä¸­å¿ƒåŒ–å€Ÿè´·åè®®ï¼ˆå¦‚ **Aave / Compound / Morpho / Spark**ï¼‰ä¸­ï¼Œ  
- å°†èµ„äº§ **Supplyï¼ˆå‡ºå€Ÿï¼‰** åˆ°èµ„é‡‘æ± è·å¾—åˆ©æ¯ï¼›  
- æˆ–è€… **Collateralï¼ˆæŠµæŠ¼ï¼‰** ä¹‹å **Borrowï¼ˆå€Ÿå…¥ï¼‰** å…¶ä»–èµ„äº§ï¼Œå†ç”¨äºäº¤æ˜“/åšå¸‚/å¤æŠ•æå‡æ”¶ç›Šã€‚  

ä¼˜åŠ¿ï¼š  
- é€æ˜ã€å¯å®¡è®¡ã€éšå­˜éšå–ï¼ˆå—æ± å­æµåŠ¨æ€§é™åˆ¶ï¼‰  
- ç»„åˆç©æ³•å¤šï¼ˆæŠµæŠ¼å€Ÿå…¥ + å…¶ä»–ç­–ç•¥ï¼‰  

---

## ğŸ“ˆ åˆ©ç‡ä¸æ¨¡å‹ï¼šå¯å˜/ç¨³å®šã€åˆ©ç”¨ç‡æ›²çº¿
- **å¯å˜åˆ©ç‡ï¼ˆVariableï¼‰**ï¼šéšå¸‚åœºä¾›éœ€å˜åŒ–ï¼Œé€‚åˆå¤§å¤šæ•°åœºæ™¯ã€‚  
- **ç¨³å®šåˆ©ç‡ï¼ˆStableï¼‰**ï¼šå°½é‡ç»´æŒç¨³å®šï¼Œä½†åœ¨æç«¯åˆ©ç”¨ç‡ä¸‹ä»ä¼šè°ƒæ•´ã€‚  
- **åˆ©ç”¨ç‡æ›²çº¿**ï¼šæ± å­ **åˆ©ç”¨ç‡è¶Šé«˜ï¼Œå€Ÿæ¬¾åˆ©ç‡è¶Šé«˜ï¼Œå­˜æ¬¾åˆ©ç‡ä¹Ÿéšä¹‹æå‡**ã€‚çƒ­é—¨æ± å­åœ¨é«˜åˆ©ç”¨ç‡é˜¶æ®µæ³¢åŠ¨æ›´å¤§ã€‚

---

## ğŸ§® å…³é”®æŒ‡æ ‡ï¼šLTV/æ¸…ç®—é˜ˆå€¼/å¥åº·å› å­
- **LTVï¼ˆLoan-To-Valueï¼Œè´·æ¬¾ä»·å€¼æ¯”ï¼‰**ï¼šæœ€å¤šå¯å€Ÿæ¯”ä¾‹ã€‚å¦‚ LTV=75%ï¼ŒæŠµæŠ¼ \$100 å¯å€Ÿ \$75ã€‚  
- **Liquidation Thresholdï¼ˆæ¸…ç®—é˜ˆå€¼ï¼‰**ï¼šå½“æŠµæŠ¼èµ„äº§ä»·å€¼/è´Ÿå€ºæ¯”è·Œç ´é˜ˆå€¼ï¼Œå°†è¢«æ¸…ç®—ã€‚  
- **Health Factorï¼ˆå¥åº·å› å­ï¼‰**ï¼š\\*>1\\* å®‰å…¨ï¼Œè¶Šé«˜è¶Šç¨³ï¼›æ¥è¿‘ \\*1\\* æå±é™©ã€‚  
- **é¢„è¨€æœºï¼ˆOracleï¼‰**ï¼šä»·æ ¼å–‚ä»·æ¥æºã€‚**å¼‚å¸¸æ³¢åŠ¨æˆ–å–‚ä»·å¤±çµ**ä¼šå¯¼è‡´è¯¯æ¸…ç®—ã€‚

---

## ğŸ§± ä¸‰ç§å…¸å‹ç©æ³•
| ç©æ³• | æ­¥éª¤ | å…¸å‹å¹´åŒ– | é€‚åˆäººç¾¤ | å¤‡æ³¨ |
|---|---|---:|---|---|
| **çº¯ä¾›ç»™èµšæ¯** | ç¨³å®šå¸/ä¸»æµå¸ Supply â†’ é¢†å–åˆ©æ¯ | 3â€“10% | æ–°æ‰‹ | ç®€å•ç¨³å¥ |
| **æŠµæŠ¼å€Ÿå…¥å¥—åˆ©** | æŠµæŠ¼ç¨³å®šå¸ â†’ å€Ÿå…¥å¦ä¸€ç¨³å®šå¸ â†’ å‚ä¸çŸ­æœŸæœºä¼šåè¿˜æ¬¾ | 8â€“15% | è¿›é˜¶ | æ³¨æ„ Gas ä¸æ»‘ç‚¹ |
| **å¾ªç¯æ æ†ï¼ˆå¥—å¨ƒï¼‰** | ç¨³å®šå¸æŠµæŠ¼ â†’ å€Ÿå…¥åŒç±»ç¨³å®šå¸ â†’ å†ä¾›ç»™ â†’ é‡å¤ | 10â€“20%+ | é«˜é˜¶ | æ”¾å¤§æ”¶ç›Šä¹Ÿæ”¾å¤§æ¸…ç®—é£é™© |

> ğŸ’¡ è§„åˆ™ï¼š**é«˜æ æ†=é«˜æ”¶ç›ŠÃ—é«˜é£é™©**ã€‚åŠ¡å¿…è®¾ç½®å¥åº·å› å­ç¼“å†²å¸¦ï¼ˆå¦‚ \`>1.5\`ï¼‰ã€‚

---

## ğŸš€ ä¸‰æ­¥æé€Ÿä¸Šæ‰‹
### ç¬¬ 1 æ­¥ï¼šå‡†å¤‡
- é’±åŒ…ï¼ˆMetamask/Rabbyï¼‰ã€ç¨³å®šå¸ï¼ˆUSDC/USDTï¼‰ã€å°‘é‡ Gasï¼›  
- é€‰æ‹©é“¾ï¼ˆä»¥å¤ªåŠä¸»ç½‘/Arbitrum/OP/BNB ç­‰ï¼‰ï¼Œç•™æ„æ‰‹ç»­è´¹ä¸æ± å­æ·±åº¦ã€‚

### ç¬¬ 2 æ­¥ï¼šé€‰æ‹©åè®®ä¸æ± å­
- åˆå­¦è€…ï¼šAave ä¸»æµç¨³å®šå¸æ± ï¼ˆæµåŠ¨æ€§ä¸é£æ§æˆç†Ÿï¼‰ï¼›  
- è§‚å¯Ÿ \\*Supply APY / Borrow APY / Utilization / å¯å¦ç¨³å®šåˆ©ç‡\\*ã€‚

### ç¬¬ 3 æ­¥ï¼šæ‰§è¡Œä¸è®°å½•
- è¿æ¥é’±åŒ… â†’ æˆæƒ â†’ Supplyï¼ˆæˆ– Collateral å Borrowï¼‰ï¼›  
- è®°å½•ï¼šåè®®/èµ„äº§/é‡‘é¢/LTV/å¥åº·å› å­/åˆ©ç‡ç±»å‹ï¼›  
- è®¾ç½®æé†’ï¼šå¥åº·å› å­ < 1.3 æˆ–ä»·æ ¼æ³¢åŠ¨ > 5% é€šçŸ¥ã€‚

---

## â™»ï¸ è¿›é˜¶ï¼šå¾ªç¯åŠ æ æ†çš„è§„åˆ™
1. **è®¾å®šä¸Šé™**ï¼šå•èµ„äº§/å•åè®®èµ„é‡‘ä¸è¶…è¿‡æ€»æœ¬é‡‘ \\*30â€“40%\\*ï¼›  
2. **ç•™è¶³ç¼“å†²**ï¼šç›®æ ‡å¥åº·å› å­ \\*â‰¥1.5\\*ï¼Œå‰§çƒˆè¡Œæƒ…å‰è¿›ä¸€æ­¥æŠ¬é«˜ï¼›  
3. **åŠ¨æ€æ¢å€Ÿ**ï¼šåˆ©ç‡å‡é«˜å¾ˆå¤šæ—¶ï¼Œè€ƒè™‘æ¢æ± /è¿˜æ¬¾é™æ æ†ï¼›  
4. **è‡ªåŠ¨åŒ–**ï¼šä½¿ç”¨è„šæœ¬/çœ‹æ¿è·Ÿè¸ª HFã€APYã€æ¸…ç®—ä»·ä¸å¯ç”¨æµåŠ¨æ€§ã€‚  

> ç¤ºä¾‹ï¼ˆæ€è·¯ï¼‰ï¼šUSDC æŠµæŠ¼ â†’ å€Ÿå…¥ USDT â†’ å† Supply USDT â†’ åå¤ 3â€“5 è½®ï¼›**åŠ¡å¿…**æ¯è½®è¯„ä¼°å¥åº·å› å­ä¸ Gas æˆæœ¬ã€‚

---

## ğŸ›¡ï¸ é£é™©çŸ©é˜µä¸è§„é¿æ¸…å•
**é£é™©çŸ©é˜µ**
| é£é™© | å¯èƒ½æ€§ | å½±å“ | è¯´æ˜ |
|---|---|---|---|
| æ¸…ç®—é£é™© | ä¸­ | é«˜ | ä»·æ ¼ä¸‹è·Œæˆ–åˆ©ç‡é£™å‡å¯¼è‡´ HF è§¦çº¿ |
| é¢„è¨€æœº/å–‚ä»·å¼‚å¸¸ | ä½-ä¸­ | é«˜ | å¶å‘æ€§å¼‚å¸¸å¯èƒ½å¼•å‘è¯¯æ¸…ç®— |
| æ™ºèƒ½åˆçº¦æ¼æ´ | ä½-ä¸­ | é«˜ | æœªå®¡è®¡/æ–°æ¨¡å—ä¸Šçº¿æœŸé£é™©æ›´é«˜ |
| åˆ©ç‡æ³¢åŠ¨ | ä¸­ | ä¸­ | é«˜åˆ©ç”¨ç‡é˜¶æ®µæ³¢åŠ¨å¤§ |
| æµåŠ¨æ€§æ¯ç«­ | ä½-ä¸­ | ä¸­ | é«˜å³°æœŸå¯èƒ½æ— æ³•åŠæ—¶å€Ÿå…¥/èµå› |

**è§„é¿æ¸…å•**
- **åˆ†æ•£åè®®ä¸é“¾**ï¼ˆAave/Compound/Morphoâ€¦ï¼‰ï¼›  
- **HF â‰¥ 1.5**ï¼Œå‰§çƒˆè¡Œæƒ…å‰é™æ æ†ï¼›  
- **åªç”¨ä¸»æµæŠµæŠ¼å“**ï¼Œé¿å¼€é•¿å°¾èµ„äº§ï¼›  
- å®šæœŸ **Revoke** å¤šä½™æˆæƒï¼›  
- è®¾ç½®ä»·æ ¼/HF/åˆ©ç”¨ç‡ **é˜ˆå€¼å‘Šè­¦**ï¼›  
- è®°å½•å…¨éƒ¨æ“ä½œï¼Œå®šæœŸå¤ç›˜åˆ©ç‡ä¸å‡€æ”¶ç›Šã€‚

---

## ğŸ§° å·¥å…·ä¸å¹³å°å¯¼èˆª
- **åè®®**ï¼šAave / Compound / Morpho / Spark / Venus  
- **æ”¶ç›Šå¯¹æ¯”**ï¼šDeFiLlamaï¼ˆLending ç±»ç›®ï¼‰  
- **èµ„äº§çœ‹æ¿**ï¼šDeBank / Zerion  
- **å®‰å…¨**ï¼šRevoke.cashï¼ˆæˆæƒå›æ”¶ï¼‰ / Etherscanï¼ˆäº‹ä»¶/åˆçº¦ï¼‰

---

## â“FAQ
**Q1ï¼šç¨³å®š/å¯å˜åˆ©ç‡æ€ä¹ˆé€‰ï¼Ÿ**  
> èµ„é‡‘é•¿æœŸåœæ”¾é€‰ç¨³å®šåˆ©ç‡æ›´çœå¿ƒï¼›å¯å˜åˆ©ç‡é€‚åˆçµæ´»æœºåŠ¨ä½†éœ€å…³æ³¨æ³¢åŠ¨ã€‚

**Q2ï¼šå¦‚ä½•é¿å…è¢«æ¸…ç®—ï¼Ÿ**  
> æé«˜å¥åº·å› å­ã€é™ä½ LTVã€é€‰æ‹©æ³¢åŠ¨æ€§æ›´ä½çš„æŠµæŠ¼å“ï¼Œå¹¶è®¾ç½®é¢„è­¦ã€‚

**Q3ï¼šå¾ªç¯æ æ†æœ‰ä»€ä¹ˆå‘ï¼Ÿ**  
> Gas æˆæœ¬ã€åˆ©ç‡çªç„¶ä¸Šå‡ã€å–‚ä»·å¼‚å¸¸ä¸æµåŠ¨æ€§ç¬æ—¶ä¸è¶³éƒ½å¯èƒ½æ”¾å¤§é£é™©ã€‚

---

## âœ… ä¸€é¡µæ‰§è¡Œæ¸…å•
- [ ] é€‰é“¾ä¸åè®®ï¼šä¸»æµé“¾ + Aave/Compound/Morpho  
- [ ] è®°å½•ï¼šSupply/Collateral/å€Ÿå…¥é‡‘é¢ã€LTVã€HFã€åˆ©ç‡ç±»å‹  
- [ ] è®¾æé†’ï¼šHF<1.3ã€ä»·æ ¼æ³¢åŠ¨>5%ã€å€Ÿæ¬¾åˆ©ç‡>é˜ˆå€¼  
- [ ] å‘¨å®¡è§†ï¼šæ˜¯å¦éœ€é™æ æ†/æ¢æ± /æ¢åˆ©ç‡  
- [ ] æœˆå¤ç›˜ï¼šçœŸå®å‡€æ”¶ç›Š vs ç›®æ ‡ï¼Œç»§ç»­ or è°ƒæ•´
`,

  // ===== ä¸å‰ç«¯é€‚é…çš„æ­¥éª¤ç»“æ„ =====
  steps: [
    { step_number: 1, title: 'å‡†å¤‡ä¸é€‰é“¾', description: 'é’±åŒ…+ç¨³å®šå¸+Gasï¼›é€‰æ‹©ä»¥å¤ªåŠæˆ–ä¸»æµäºŒå±‚ï¼Œå…³æ³¨æ‰‹ç»­è´¹ä¸æ± æ·±ã€‚', estimated_time: '10 åˆ†é’Ÿ' },
    { step_number: 2, title: 'é€‰æ‹©åè®®ä¸æ± å­', description: 'æŸ¥çœ‹ Supply/Borrow APYã€LTVã€æ¸…ç®—é˜ˆå€¼ã€æ˜¯å¦æ”¯æŒç¨³å®šåˆ©ç‡ã€‚', estimated_time: '10 åˆ†é’Ÿ' },
    { step_number: 3, title: 'æ‰§è¡Œä¾›ç»™/æŠµæŠ¼/å€Ÿå…¥', description: 'è¿æ¥é’±åŒ…æˆæƒï¼Œå®Œæˆ Supply æˆ– Collateralâ†’Borrow å¹¶è®°å½•å…³é”®æŒ‡æ ‡ã€‚', estimated_time: '10â€“20 åˆ†é’Ÿ' },
    { step_number: 4, title: 'ç›‘æ§ä¸å‘Šè­¦', description: 'è·Ÿè¸ªå¥åº·å› å­/ä»·æ ¼/åˆ©ç”¨ç‡ï¼Œè®¾ç½®è‡ªåŠ¨æé†’æˆ–çœ‹æ¿ã€‚', estimated_time: 'æŒç»­è¿›è¡Œ' },
    { step_number: 5, title: 'å¤æŠ•/é™æ æ†/è°ƒä»“', description: 'æŒ‰æœˆå¤æŠ•ï¼›è¡Œæƒ…å‰§çƒˆæ—¶é™æ æ†æˆ–æ¢æ± ï¼Œç»´æŒ HFâ‰¥1.5ã€‚', estimated_time: '5 åˆ†é’Ÿ/æ¬¡' },
  ],
};

// ===== è‡ªåŠ¨æ‰§è¡Œï¼šä¸æ¨¡æ¿ä¿æŒä¸€è‡´ =====
async function getAuthToken() {
  const response = await axios.post(`${DIRECTUS_URL}/auth/login`, {
    email: 'the_uk1@outlook.com',
    password: 'Mygcdjmyxzg2026!',
  });
  return response.data.data.access_token;
}

async function addGuide() {
  try {
    const token = await getAuthToken();

    const strategy = {
      ...GUIDE_CONFIG,
      status: 'published',
      is_featured: true,
      view_count: 0,
      bookmark_count: 0,
      published_at: new Date().toISOString(),
    };

    const response = await axios.post(
      `${DIRECTUS_URL}/items/strategies`,
      strategy,
      {
        headers: {
          Authorization: `Bearer ${token}`,
          'Content-Type': 'application/json',
        },
      },
    );

    console.log('\nâœ… å€Ÿè´·æŒ–æ¯æŒ‡å—åˆ›å»ºæˆåŠŸ!');
    console.log(`   ID: ${response.data.data.id}`);
    console.log(`   Slug: ${response.data.data.slug}`);
    console.log(`   è®¿é—®: http://localhost:3000/strategies/${response.data.data.slug}\n`);
  } catch (error) {
    console.error('\nâŒ åˆ›å»ºå¤±è´¥:', error.response?.data || error.message);
  }
}

addGuide();
