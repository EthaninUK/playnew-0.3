const axios = require('axios');

const DIRECTUS_URL = 'http://localhost:8055';

async function getAuthToken() {
  const response = await axios.post(`${DIRECTUS_URL}/auth/login`, {
    email: 'the_uk1@outlook.com',
    password: 'Mygcdjmyxzg2026!'
  });
  return response.data.data.access_token;
}

async function addAirdropTasksIntro() {
  const token = await getAuthToken();

  const strategy = {
    // 基本信息
    title: '空投任务完全指南',
    slug: 'airdrop-tasks-guide',
    summary: '空投任务是获取免费代币的最佳途径之一。本指南将教你如何识别、参与和最大化空投收益。',

    // 分类 - 空投任务
    category: 'e149dfcf-f765-47b9-92d1-f484f8477ee5',
    category_l1: 'airdrop',
    category_l2: '空投任务',

    // 难度和风险
    difficulty_level: 1, // 1-5, 1=新手友好
    risk_level: 1, // 1-5, 1=极低风险

    // 收益预期
    apy_min: 0,
    apy_max: 0,

    // 资金要求
    min_capital: 10,
    recommended_capital: 100,

    // 详细内容 - Markdown 格式
    content: `## 什么是空投任务?

空投任务是区块链项目为了推广产品、增加用户而设计的一系列任务活动。用户通过完成指定任务(如交互、测试、社交媒体互动等),有机会在项目发币后获得免费代币奖励。

### 为什么要做空投任务?

- **零成本或低成本**: 大多数空投任务只需支付少量 Gas 费
- **潜在高回报**: 历史上许多空投价值数千至数万美元(如 Uniswap $1,200、dYdX $10,000+)
- **早期参与优势**: 成为项目早期用户,获得更多奖励权重
- **学习机会**: 在实践中了解新协议和新技术

## 本板块推荐的内容类型

在"空投任务"分类下,你将找到:

### 1. **确认空投项目**
已明确宣布将进行空投的项目,有官方确认的代币分配计划。

**特点**:
- 官方公告或路线图中明确提到空投
- 有明确的快照时间或积分系统
- 风险较低,确定性较高

**示例**: Starknet、zkSync、Linea 等已确认空投但未发币的 L2 项目

### 2. **潜在空投项目**
虽未官方确认,但根据以往经验和行业惯例,极有可能空投的项目。

**判断依据**:
- 获得大额风险投资但未发币
- 竞品有空投先例(如 DeFi 协议、L2 链)
- 有积分系统或早期用户计划
- 团队在社交媒体暗示未来有代币计划

**示例**: Scroll、Base、Blast 等新兴 L2 生态

### 3. **测试网任务**
项目主网上线前的测试网活动,历史上测试网参与者常获得空投。

**特点**:
- 使用测试币,无需真实资金
- 风险极低,时间成本为主
- 适合新手练习

### 4. **社交任务**
通过社交媒体互动、内容创作等方式获得空投资格。

**常见任务**:
- 关注 Twitter/Discord
- 转发、点赞、评论
- 填写表单、问卷
- 邀请好友

### 5. **链上交互任务**
需要在区块链上进行实际操作的任务。

**常见操作**:
- Swap 代币
- 提供流动性
- 借贷操作
- 跨链桥接
- NFT Mint

## 如何参与空投任务?

### 第一步: 准备工作

1. **钱包准备**
   - 安装 MetaMask 或其他 Web3 钱包
   - 准备多个钱包地址(女巫攻击风险考虑)
   - 备份助记词,确保资金安全

2. **资金准备**
   - 每个钱包准备 $50-200 的 ETH 或其他主链币
   - 准备足够的 Gas 费(各链 Gas 费差异很大)

3. **信息收集**
   - 关注空投信息聚合平台
   - 加入 Discord/Telegram 社区
   - 订阅空投追踪网站

### 第二步: 识别优质空投

**优质空投特征**:
- ✅ 获得知名 VC 投资(如 a16z、Paradigm)
- ✅ 团队背景强大
- ✅ 产品有实际用户和 TVL
- ✅ 明确的代币经济学规划
- ✅ 有竞品空投先例

**警惕风险**:
- ⚠️ 要求充值大额资金
- ⚠️ 要求授权可疑合约
- ⚠️ 社交媒体粉丝很少
- ⚠️ 无法验证团队身份
- ⚠️ 承诺保证收益

### 第三步: 执行任务

1. **阅读官方文档**: 了解任务要求和注意事项
2. **分批操作**: 不要所有钱包同时操作,避免被识别为女巫
3. **保持活跃**: 定期交互,不要一次性完成后就停止
4. **多样化操作**: 使用产品的不同功能,表现得像真实用户
5. **记录跟踪**: 记录每个钱包的操作历史和快照时间

### 第四步: 等待和领取

1. **关注公告**: 及时了解快照时间和空投分配方案
2. **验证资格**: 快照后检查是否符合资格
3. **及时领取**: 空投发放后尽快领取(有时限)
4. **决策卖还是持有**: 根据项目基本面和市场情况决定

## 空投任务的核心策略

### 1. 批量操作策略

使用多个钱包并行操作,提高收益期望:
- 新手: 3-5 个钱包
- 进阶: 10-20 个钱包
- 专业: 50+ 个钱包(需要自动化工具)

**注意**: 避免被识别为女巫攻击:
- 不同钱包不要同时操作
- 资金来源不要都从一个地址
- IP 地址要多样化(使用 VPN)
- 操作金额和时间要有差异

### 2. 时间管理策略

- **早鸟优势**: 项目初期参与,通常权重更高
- **持续活跃**: 长期用户往往获得更多奖励
- **快照前冲刺**: 临近快照时加大交互频率

### 3. 资金分配策略

- **核心项目**: 每个钱包 $100-500
- **潜在项目**: 每个钱包 $50-100
- **测试网**: 仅时间成本,无需资金
- **保留流动性**: 不要把所有资金锁在空投项目中

### 4. 风险控制策略

- **分散投资**: 不要只做一个项目
- **本金保护**: 优先选择低风险的稳定币策略
- **及时止损**: 如果项目出现负面新闻,考虑退出
- **安全第一**: 仔细审查合约权限,使用硬件钱包

## 常见问题

### Q: 空投任务需要多少时间?

A: 因项目而异:
- 简单社交任务: 5-10 分钟
- 链上交互: 30 分钟 - 2 小时
- 持续性任务: 每周 1-2 小时,持续数月

### Q: 空投任务会亏钱吗?

A: 可能的损失来源:
- Gas 费支出(主要成本)
- 代币价格波动(如果需要持有)
- 流动性池无常损失
- 智能合约风险

建议: 控制单个任务成本在 $10-50,分散到多个项目。

### Q: 如何判断空投时机?

A: 关注以下信号:
- 测试网结束,主网上线
- 官方暗示"有重大公告"
- 竞品近期空投(同类项目可能跟进)
- 融资后 6-12 个月(常见时间窗口)

### Q: 空投后应该立即卖还是持有?

A: 取决于:
- **立即卖**: 不看好项目,只为套利;需要回本
- **持有**: 看好长期发展;有锁仓激励;代币价格被低估

历史数据显示,大多数空投代币在初期会下跌,但优质项目长期可能上涨。

## 推荐工具

### 信息聚合
- **DefiLlama**: 查看项目 TVL 和数据
- **Layer3**: 空投任务聚合平台
- **Crew3**: 社交任务平台

### 钱包管理
- **Rabby**: 多链钱包,安全提示更好
- **Debank**: 资产管理和追踪

### 安全检测
- **Revoke.cash**: 检查和撤销合约授权
- **Etherscan**: 验证合约代码

## 风险提示

⚠️ **空投任务存在以下风险,请谨慎参与**:

1. **不确定性**: 大多数项目没有明确承诺空投
2. **女巫识别**: 批量操作可能被识别并取消资格
3. **资金损失**: Gas 费、时间成本可能无法回本
4. **智能合约风险**: 可能存在漏洞或恶意代码
5. **监管风险**: 某些地区可能对空投有法律限制

建议: **不要投入超过自己承受能力的资金和时间**。空投是锦上添花,不是主要收入来源。

## 成功案例

历史上一些成功的空投:
- **Uniswap (2020)**: $1,200-1,500 / 地址
- **dYdX (2021)**: $10,000+ / 地址
- **ENS (2021)**: $8,000-15,000 / 地址
- **Aptos (2022)**: $1,500-3,000 / 地址
- **Arbitrum (2023)**: $1,000-10,000+ / 地址

这些案例证明,认真参与优质项目的空投任务是有价值的。

---

**记住**: 空投任务是一场耐心和信息差的游戏。保持关注,持续学习,理性参与,祝你空投丰收! 🎁`,

    // 步骤
    steps: [
      {
        order_index: 1,
        title: '准备钱包和资金',
        description: '创建 Web3 钱包,准备少量 ETH 或其他主链币作为 Gas 费',
        estimated_time: '10分钟',
        warning: '妥善备份助记词,建议使用硬件钱包或多重签名'
      },
      {
        order_index: 2,
        title: '研究和筛选项目',
        description: '通过 VC 投资、团队背景、产品数据筛选优质潜在空投项目',
        estimated_time: '1-2小时',
        warning: '避免没有实际产品、要求大额充值的可疑项目'
      },
      {
        order_index: 3,
        title: '完成交互任务',
        description: '根据项目要求完成链上交互、社交任务等',
        estimated_time: '30分钟-2小时',
        warning: '仔细检查合约授权,分散操作避免被识别为女巫'
      },
      {
        order_index: 4,
        title: '持续跟踪和活跃',
        description: '定期检查项目进展,保持适度活跃度',
        estimated_time: '每周1-2小时',
        warning: '关注官方公告,及时了解快照时间和规则变化'
      },
      {
        order_index: 5,
        title: '领取和处理空投',
        description: '空投发放后及时领取,根据情况决定持有或卖出',
        estimated_time: '10-30分钟',
        warning: '注意领取时限,警惕假冒空投链接'
      }
    ],

    // 其他元数据
    author: 'PlayNew 团队',
    status: 'published',
    featured: true, // 精选
    is_beginner_friendly: true,
    view_count: 0,

    // 时间戳
    date_created: new Date().toISOString(),
    date_updated: new Date().toISOString(),
  };

  try {
    const response = await axios.post(
      `${DIRECTUS_URL}/items/strategies`,
      strategy,
      {
        headers: {
          'Authorization': `Bearer ${token}`,
          'Content-Type': 'application/json'
        }
      }
    );

    console.log('✅ 空投任务介绍策略创建成功!');
    console.log('Strategy ID:', response.data.data.id);
    console.log('Slug:', response.data.data.slug);
    console.log('\n访问链接: http://localhost:3000/strategies/airdrop-tasks-guide');

  } catch (error) {
    console.error('❌ 创建失败:', error.response?.data || error.message);
  }
}

addAirdropTasksIntro();
