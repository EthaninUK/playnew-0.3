const axios = require('axios');

const DIRECTUS_URL = 'http://localhost:8055';

/**
 * å»ºè®®ï¼šç”Ÿäº§ç¯å¢ƒè¯·æ”¹ä¸ºä½¿ç”¨ç¯å¢ƒå˜é‡
 * const DIRECTUS_EMAIL = process.env.DIRECTUS_EMAIL
 * const DIRECTUS_PASSWORD = process.env.DIRECTUS_PASSWORD
 */

const GUIDE_CONFIG = {
  // ===== åŸºæœ¬ä¿¡æ¯ =====
  title: 'æœŸç°åŸºå·®ï¼ˆCash & Carry / Basis Tradingï¼‰å®Œå…¨æŒ‡å—',
  slug: 'basis-trading-complete-guide',
  summary:
    'ç³»ç»Ÿæ¢³ç†æ­£åŸºå·®/é€†åŸºå·®ä¸å±•æœŸé€»è¾‘ï¼Œç»™å‡ºä¸‰ç§æœŸç°ç»„åˆï¼ˆç°è´§+å­£åº¦ç©ºã€ç¥¨æ®ç­‰ä»·å¤š+å­£åº¦ç©ºã€è·¨æœŸé™åŸºå·®ï¼‰ä¸å‡€APRåˆ†è§£ã€é£æ§ä¸çœ‹æ¿æ¨¡æ¿ã€‚',

  // åœ¨ Directus ä¸­æ›¿æ¢ä¸ºçœŸå®åˆ†ç±» ID
  category: 'c9772310-95c9-431f-900e-0c91d66f0dcd',

  // ç«™å†…ä¸€çº§/äºŒçº§åˆ†ç±»
  category_l1: 'arbitrage',
  category_l2: 'æœŸç°åŸºå·®',

  // ===== å…ƒæ•°æ® =====
  difficulty_level: 4,                 // 1-5
  risk_level: 3,                       // ä»·æ ¼/æ‰§è¡Œ/å¹³å°/æµåŠ¨æ€§
  apy_min: 4,                          // éšå¸‚åœºæ³¢åŠ¨ï¼Œç¤ºä¾‹åŒºé—´
  apy_max: 35,

  // èµ„é‡‘/æ—¶é—´/æŠ€æœ¯é—¨æ§›
  threshold_capital: '1,000-200,000 USDï¼ˆä¿è¯é‡‘ä¸ç°è´§åˆè®¡ï¼‰',
  threshold_capital_min: 1000,
  time_commitment: 'æ¯æ—¥ 10â€“30 åˆ†é’Ÿï¼ˆå·¡æ£€/å±•æœŸ/å¯¹å†²ï¼‰',
  time_commitment_minutes: 20,
  threshold_tech_level: 'intermediate',

  // ===== å¯è¯»æ€§å¼ºçš„ Markdown æ­£æ–‡ =====
  content: `> **é€‚ç”¨äººç¾¤**ï¼šå¸Œæœ›ä»¥â€œæ–¹å‘ä¸­æ€§â€èµšå– **æœŸç°åŸºå·®/å±•æœŸæ”¶ç›Š** çš„ç”¨æˆ·  
> **é˜…è¯»æ—¶é—´**ï¼šâ‰ˆ 12â€“15 åˆ†é’Ÿ  
> **å…³é”®è¯**ï¼šBasis / Cash & Carry / Contango / Backwardation / å±•æœŸï¼ˆRollï¼‰/ å­£åº¦åˆçº¦ / å‡€APR / å¼ºå¹³ä»·

---

## ğŸ§­ TL;DR
- **æœŸç°åŸºå·®**ï¼šè¿œæœŸ/å­£åº¦åˆçº¦ä¸ç°è´§çš„ä»·å·®ï¼ˆ\\*F - S\\*ï¼‰ã€‚**æ­£åŸºå·®ï¼ˆContangoï¼‰** å¸¸è§äºç‰›å¸‚/åˆ©ç‡æº¢ä»·ï¼›**é€†åŸºå·®ï¼ˆBackwardationï¼‰** å¤šè§äºç©ºæ–¹å ä¼˜æˆ–ç°è´§ç¨€ç¼ºã€‚  
- **æ ¸å¿ƒåšæ³•**ï¼š**å¤šç°è´§ï¼ˆæˆ–ç­‰ä»·å¤šå¤´ï¼‰+ ç©ºå­£åº¦/å½“å­£åˆçº¦**ï¼Œæ–¹å‘ä¸­æ€§ï¼Œèµšå– **å¹´åŒ–åŸºå·®**ï¼›åˆçº¦ä¸´è¿‘äº¤å‰²éœ€ **å±•æœŸ**ã€‚  
- **å…³é”®KPI**ï¼š\\*å‡€APR = åŸºå·®æ”¶ç›Š âˆ’ æ‰‹ç»­è´¹ âˆ’ èµ„é‡‘/å€Ÿè´·æˆæœ¬ âˆ’ å±•æœŸæ»‘ç‚¹ âˆ’ è·¨æ‰€/æå¸æˆæœ¬\\*ï¼›å¦çœ‹ **ä¿è¯é‡‘å®‰å…¨å«/å¼ºå¹³è·ç¦»**ã€‚

---

## ğŸ—‚ ç›®å½•
1. [åŸç†é€Ÿè§ˆï¼šåŸºå·®ä»å“ªæ¥](#åŸç†é€Ÿè§ˆåŸºå·®ä»å“ªæ¥)
2. [ä¸‰ç§ä¸»æµç»„åˆ](#ä¸‰ç§ä¸»æµç»„åˆ)
3. [å‡€APRåˆ†è§£ä¸æˆæœ¬æ¸…å•](#å‡€apråˆ†è§£ä¸æˆæœ¬æ¸…å•)
4. [ä¸‰æ­¥æé€Ÿä¸Šæ‰‹](#ä¸‰æ­¥æé€Ÿä¸Šæ‰‹)
5. [è¿›é˜¶ï¼šå±•æœŸèŠ‚å¥ä¸å¤šæœŸé™ç¯®å­](#è¿›é˜¶å±•æœŸèŠ‚å¥ä¸å¤šæœŸé™ç¯®å­)
6. [é£é™©çŸ©é˜µä¸è§„é¿æ¸…å•](#é£é™©çŸ©é˜µä¸è§„é¿æ¸…å•)
7. [æŒ‡æ ‡çœ‹æ¿ä¸è®°å½•æ¨¡æ¿](#æŒ‡æ ‡çœ‹æ¿ä¸è®°å½•æ¨¡æ¿)
8. [FAQ](#faq)
9. [ä¸€é¡µæ‰§è¡Œæ¸…å•](#ä¸€é¡µæ‰§è¡Œæ¸…å•)

---

## ğŸ“˜ åŸç†é€Ÿè§ˆï¼šåŸºå·®ä»å“ªæ¥
- \\*F = S Ã— (1 + r âˆ’ y)^{t}\\* çš„ç›´è§‰ç‰ˆï¼šè¿œæœŸä»·æ ¼ï¼ˆFï¼‰å— **æ— é£é™©åˆ©ç‡ r**ã€**æŒä»“/å€Ÿè´·/èµ„é‡‘æˆæœ¬** ä¸ **æ”¶ç›Šç‡ yï¼ˆè´¨æŠ¼/ç¥¨æ¯ç­‰ï¼‰** å½±å“ã€‚  
- **æ­£åŸºå·®**ï¼ˆF>Sï¼‰ï¼šè¿œæœŸæº¢ä»·è¦†ç›–èèµ„/æœºä¼šæˆæœ¬ï¼›  
- **é€†åŸºå·®**ï¼ˆF<Sï¼‰ï¼šç°è´§ç¨€ç¼º/å€Ÿè´·ç´§å¼ /åšç©ºéœ€æ±‚æ—ºç››ã€‚

---

## ğŸ§± ä¸‰ç§ä¸»æµç»„åˆ
| ç­–ç•¥ | ç»„åˆä¸æ–¹å‘ | æ”¶ç›Šæ¥æº | é€‚åˆäººç¾¤ | å…³é”®ç‚¹ |
|---|---|---|---|---|
| **æ ‡å‡†æœŸç°ï¼ˆæ­£åŸºå·®ï¼‰** | å¤šç°è´§ + ç©ºå­£åº¦/å½“å­£ | å¹´åŒ–æ­£åŸºå·® | æ–°æ‰‹-è¿›é˜¶ | å¼ºå¹³å®‰å…¨å«ã€å±•æœŸæ»šåŠ¨ |
| **ç­‰ä»·ç‰©å¤šå¤´** | å¤š LST/LRT/ETF/æŒ‡æ•°åˆçº¦ + ç©ºå­£åº¦ | è´¨æŠ¼æ”¶ç›Š + åŸºå·® | è¿›é˜¶ | æŠ˜ä»·/èµå›/æŠµæŠ¼æƒé‡ |
| **è·¨æœŸé™åŸºå·®** | å¤šè¿‘æœˆç©ºè¿œæœˆï¼ˆæˆ–ç›¸åï¼‰ | æœŸé™ç»“æ„å˜åŒ– | é«˜é˜¶ | æµåŠ¨æ€§/ä¿è¯é‡‘ä¸ç›¸å…³æ€§ |

> ğŸ’¡ **ä¸èµ„é‡‘è´¹ç‡å¥—åˆ©åŒºåˆ«**ï¼šèµ„é‡‘è´¹çœ‹â€œæ°¸ç»­è´¹ç‡â€ï¼›æœŸç°åŸºå·®çœ‹â€œå­£åº¦/å½“å­£ vs ç°è´§â€ã€‚

---

## ğŸ’¸ å‡€APRåˆ†è§£ä¸æˆæœ¬æ¸…å•
**å‡€APRï¼ˆç¤ºä¾‹ï¼‰**  
\`Net APR = Annualized Basis âˆ’ Trading Fees âˆ’ Borrowing/Funding âˆ’ Roll Cost âˆ’ Slippage âˆ’ Transfers\`

**æˆæœ¬æ„æˆ**  
- ç°è´§/åˆçº¦ å¼€ä»“ä¸å¹³ä»“ **æ‰‹ç»­è´¹**ã€**æ»‘ç‚¹**ï¼›  
- **å€Ÿè´·/èµ„é‡‘** æˆæœ¬ï¼ˆä¹°ç°è´§æˆ–ä¿è¯é‡‘å ç”¨ï¼‰ï¼›  
- **å±•æœŸ** æˆæœ¬ï¼ˆå­£åº¦ç§»ä»“ä»·å·® + æ‰‹ç»­è´¹ + æ»‘ç‚¹ï¼‰ï¼›  
- è·¨æ‰€æ—¶ï¼š**å……å€¼/æå¸è´¹**ã€åˆ°è´¦æ—¶å»¶ä¸ä»·æ ¼åç§»ã€‚

---

## ğŸš€ ä¸‰æ­¥æé€Ÿä¸Šæ‰‹
### ç¬¬ 1 æ­¥ï¼šå»ºä»“ä¸å®‰å…¨å«
- é€‰ **æ·±åº¦å¥½/è´¹ç‡ä½** çš„äº¤æ˜“æ‰€ä¸æ ‡çš„ï¼ˆBTC/ETH ä¼˜å…ˆï¼‰ï¼›  
- **åŒæ­¥** å»ºï¼šå¤šç°è´§ + ç©ºå­£åº¦/å½“å­£ï¼›  
- é¢„æ¼” **å¼ºå¹³ä»·** ä¸ **ä¿è¯é‡‘å®‰å…¨å«**ï¼ˆâ‰¥ 1.5â€“2Ã— é¢„è®¡æ³¢åŠ¨ï¼‰ã€‚

### ç¬¬ 2 æ­¥ï¼šå·¡æ£€ä¸è®°è´¦
- æ¯æ—¥/æ¯ 8h è®°å½•ï¼š**åŸºå·®å¹´åŒ–ã€å‡€APRã€æ‰‹ç»­è´¹/å€Ÿè´·ã€ä¿è¯é‡‘åˆ©ç”¨ç‡**ï¼›  
- å½“ **åŸºå·®æ˜¾è‘—æ”¶æ•›** æˆ– **å‡€APR<é˜ˆå€¼** â†’ é™ä»“/å¹³ä»“/åˆ‡æ¢æ ‡çš„ã€‚

### ç¬¬ 3 æ­¥ï¼šå±•æœŸä¸åˆ†æ•£
- ä¸´è¿‘äº¤å‰² \`T-7 ~ T-3\` è§‚å¯Ÿå±•æœŸç‚¹ä½ä¸æµåŠ¨æ€§ï¼Œæ‰§è¡Œ **æ»šåŠ¨å±•æœŸ**ï¼›  
- åˆ†æ•£ **æ‰€Ã—æ ‡çš„**ï¼Œç»´æŒ **ç¨³å®šå¸ç¼“å†²** ç”¨äºè¡¥ä¿è¯é‡‘ã€‚

---

## â™»ï¸ è¿›é˜¶ï¼šå±•æœŸèŠ‚å¥ä¸å¤šæœŸé™ç¯®å­
- **å›ºå®šèŠ‚å¥**ï¼šæ¯å­£å›ºå®šçª—å£æ»šåŠ¨ï¼Œç®€åŒ–æ“ä½œï¼›  
- **é˜ˆå€¼é©±åŠ¨**ï¼šå½“ **è¿‘æœˆ-è¿œæœˆä»·å·®** è¶…é˜ˆå€¼æ‰å±•æœŸï¼›  
- **å¤šæœŸé™ç¯®å­**ï¼šé…ç½® **å½“å­£/æ¬¡å­£/è¿œå­£** æƒé‡ï¼Œå¹³æ»‘å•ä¸€æœŸé™é£é™©ï¼›  
- **è‡ªåŠ¨åŒ–**ï¼šn8n/è„šæœ¬æŠ“å– \`S, F_{near}, F_{far}\` â†’ è®¡ç®— **å¹´åŒ–åŸºå·®/å‡€APR** â†’ ä½äºé˜ˆå€¼å‘Šè­¦æˆ–åŠè‡ªåŠ¨å±•æœŸã€‚

---

## ğŸ›¡ï¸ é£é™©çŸ©é˜µä¸è§„é¿æ¸…å•
**é£é™©çŸ©é˜µ**
| é£é™© | å¯èƒ½æ€§ | å½±å“ | è¯´æ˜ |
|---|---|---|---|
| åŸºå·®æ”¶æ•›/åè½¬ | ä¸­ | ä¸­ | æ”¶ç›Šä¸‹é™æˆ–è½¬è´Ÿ |
| çˆ†ä»“/ç©¿ä»“ | ä½-ä¸­ | é«˜ | çªå‘è¡Œæƒ… + ä¿è¯é‡‘ä¸è¶³ |
| æ‰§è¡Œä¸æ»‘ç‚¹ | ä¸­ | ä¸­ | å¼€/å¹³ä¸åŒæ­¥æˆ–æˆäº¤å†²å‡» |
| å±•æœŸé”™ä½ | ä½-ä¸­ | ä¸­ | å±•æœŸä»·å·®ä¸æµåŠ¨æ€§ä¸è¶³ |
| å¹³å°/æç° | ä½-ä¸­ | é«˜ | å®•æœº/é£æ§/æç°å»¶è¿Ÿ |

**è§„é¿æ¸…å•**
- **å®‰å…¨å«**ï¼šä¿è¯é‡‘ä¸ç¨³å®šå¸ç¼“å†²å……è¶³ï¼›  
- **åˆ†æ•£å¹³å°/æ ‡çš„/æœŸé™**ï¼›  
- è®¾å®š **å‡€APR/åŸºå·®/ä¿è¯é‡‘é˜ˆå€¼** ä¸å‘Šè­¦ï¼›  
- ç»†ç®— **æ‰€æœ‰æˆæœ¬**ï¼ŒæŒ‰å‘¨å¤ç›˜çœŸå®å‡€æ”¶ç›Šï¼›  
- é¿å…è¿‡åº¦æ æ†ï¼Œé¢„æ¡ˆ **ä¸€é”®é™ä»“**ã€‚

---

## ğŸ“Š æŒ‡æ ‡çœ‹æ¿ä¸è®°å½•æ¨¡æ¿
- **åŸºå·®å¹´åŒ–æ›²çº¿**ï¼ˆå½“å­£/æ¬¡å­£/è¿œå­£ï¼‰  
- **å‡€APR ä¸æˆæœ¬åˆ†è§£**ï¼ˆæ‰‹ç»­è´¹/å€Ÿè´·/å±•æœŸ/è·¨æ‰€ï¼‰  
- **ä¿è¯é‡‘åˆ©ç”¨ç‡ä¸å¼ºå¹³è·ç¦»**  
- **åˆ†æ•£åº¦**ï¼ˆæ‰€Ã—æ ‡çš„Ã—æœŸé™ï¼‰  
- **é˜ˆå€¼è§¦å‘æ—¥å¿—**ï¼ˆé™ä»“/å±•æœŸ/åˆ‡æ¢ï¼‰

---

## â“FAQ
**Q1ï¼šåŸºå·®ä¸èµ„é‡‘è´¹å¥—åˆ©å“ªä¸ªæ›´ç¨³ï¼Ÿ**  
> ç¯å¢ƒç›¸å…³ã€‚**åŸºå·®**å—æœŸé™ç»“æ„ä¸å±•æœŸç‚¹å½±å“ï¼›**èµ„é‡‘è´¹**å—å¤šç©ºæ‹¥æŒ¤å½±å“ã€‚ä¸¤è€…å¯å¹¶è¡Œå¯¹æ¯”å‡€APRã€‚  
**Q2ï¼šä¸€å®šè¦ä¹°ç°è´§å—ï¼Ÿ**  
> å¯ç”¨ **ç­‰ä»·å¤šå¤´**ï¼ˆLST/LRT/ETF/æŒ‡æ•°åˆçº¦ï¼‰ï¼Œä½†éœ€è¯„ä¼°æŠ˜ä»·ä¸æŠµæŠ¼æƒé‡ã€æµåŠ¨æ€§ä¸èµå›å‘¨æœŸã€‚  
**Q3ï¼šå±•æœŸä»€ä¹ˆæ—¶å€™åšæœ€å¥½ï¼Ÿ**  
> é€šå¸¸åœ¨ **æµåŠ¨æ€§å³°å€¼çª—å£**ï¼ˆäº¤å‰²å‰å‡ å¤©ï¼‰ä¸”ä»·å·®åˆé€‚æ—¶æ»šåŠ¨ï¼Œé¿å…ä¸´é—¨æ‹¥å µä¸æ»‘ç‚¹ã€‚

---

## âœ… ä¸€é¡µæ‰§è¡Œæ¸…å•
- [ ] é€‰æ·±åº¦å¥½/è´¹ç‡ä½çš„å¹³å°ä¸æ ‡çš„ï¼ˆBTC/ETH ä¼˜å…ˆï¼‰  
- [ ] åŒæ­¥å»ºï¼šå¤šç°è´§ï¼ˆæˆ–ç­‰ä»·ç‰©ï¼‰+ ç©ºå­£åº¦/å½“å­£ï¼›é¢„æ¼”å¼ºå¹³ä¸å®‰å…¨å«  
- [ ] çœ‹æ¿è®°å½•ï¼šåŸºå·®å¹´åŒ–ã€å‡€APRã€ä¿è¯é‡‘ã€æˆæœ¬åˆ†è§£  
- [ ] é˜ˆå€¼ï¼šå‡€APR/åŸºå·®/ä¿è¯é‡‘è§¦å‘é™ä»“æˆ–åˆ‡æ¢  
- [ ] å±•æœŸï¼š\`T-7 ~ T-3\` è§‚å¯ŸæµåŠ¨æ€§ä¸ä»·å·®ï¼Œæ»šåŠ¨ç»­æœŸ
`,

  // ===== ä¸å‰ç«¯é€‚é…çš„æ­¥éª¤ç»“æ„ï¼ˆ5æ­¥ï¼‰ =====
  steps: [
    { step_number: 1, title: 'å»ºä»“ä¸å®‰å…¨å«', description: 'å¤šç°è´§ï¼ˆæˆ–ç­‰ä»·ç‰©ï¼‰+ ç©ºå­£åº¦/å½“å­£ï¼ŒåŒæ­¥æˆäº¤å¹¶é¢„æ¼”å¼ºå¹³ä»·ä¸ä¿è¯é‡‘å®‰å…¨å«ã€‚', estimated_time: '30â€“60 åˆ†é’Ÿ' },
    { step_number: 2, title: 'å·¡æ£€ä¸è®°è´¦', description: 'æŒ‰ 8h/æ—¥è®°å½•åŸºå·®å¹´åŒ–ã€å‡€APRã€æ‰‹ç»­è´¹/å€Ÿè´·ä¸ä¿è¯é‡‘åˆ©ç”¨ç‡ã€‚', estimated_time: 'æ¯æ—¥ 10â€“30 åˆ†é’Ÿ' },
    { step_number: 3, title: 'é˜ˆå€¼é©±åŠ¨åŠ¨ä½œ', description: 'å‡€APR/åŸºå·®æ”¶æ•›æˆ–è½¬è´Ÿå³é™ä»“/åˆ‡æ¢ï¼›ä¿æŒç¨³å®šå¸ç¼“å†²ã€‚', estimated_time: '5â€“10 åˆ†é’Ÿ/æ¬¡' },
    { step_number: 4, title: 'å±•æœŸä¸åˆ†æ•£', description: 'äº¤å‰²å‰æ»šåŠ¨å±•æœŸï¼Œåˆ†æ•£æ‰€Ã—æ ‡çš„Ã—æœŸé™ï¼Œé™ä½å•ç‚¹é£é™©ã€‚', estimated_time: '10â€“30 åˆ†é’Ÿ/æ¬¡' },
    { step_number: 5, title: 'å¤ç›˜ä¸è‡ªåŠ¨åŒ–', description: 'å‘¨åº¦å¤ç›˜çœŸå®å‡€æ”¶ç›Šï¼›ç”¨ n8n/è„šæœ¬åšé˜ˆå€¼å‘Šè­¦ä¸åŠè‡ªåŠ¨å±•æœŸã€‚', estimated_time: '30â€“60 åˆ†é’Ÿ/å‘¨' },
  ],
};

// ===== è‡ªåŠ¨æ‰§è¡Œï¼šä¸æ—¢æœ‰æ¨¡æ¿ä¸€è‡´ =====
async function getAuthToken() {
  const response = await axios.post(`${DIRECTUS_URL}/auth/login`, {
    email: 'the_uk1@outlook.com',
    password: 'Mygcdjmyxzg2026!',
  });
  return response.data.data.access_token;
}

async function addGuide() {
  try {
    const token = await getAuthToken();

    const strategy = {
      ...GUIDE_CONFIG,
      status: 'published',
      is_featured: true,
      view_count: 0,
      bookmark_count: 0,
      published_at: new Date().toISOString(),
    };

    const response = await axios.post(
      `${DIRECTUS_URL}/items/strategies`,
      strategy,
      {
        headers: {
          Authorization: `Bearer ${token}`,
          'Content-Type': 'application/json',
        },
      },
    );

    console.log('\nâœ… æœŸç°åŸºå·® æŒ‡å—åˆ›å»ºæˆåŠŸ!');
    console.log(`   ID: ${response.data.data.id}`);
    console.log(`   Slug: ${response.data.data.slug}`);
    console.log(`   è®¿é—®: http://localhost:3000/strategies/${response.data.data.slug}\n`);
  } catch (error) {
    console.error('\nâŒ åˆ›å»ºå¤±è´¥:', error.response?.data || error.message);
  }
}

addGuide();
