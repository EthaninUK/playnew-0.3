const axios = require('axios');

const DIRECTUS_URL = 'http://localhost:8055';

// ===== 12.5 OKX åˆçº¦åšå¸‚è®¡åˆ’ =====
const STRATEGY_12_5 = {
  title: 'OKX åˆçº¦åšå¸‚è®¡åˆ’ - è¡ç”Ÿå“æµåŠ¨æ€§æŒ–çŸ¿',
  slug: 'orderbook-12-5-okx-derivatives-market-maker-program',
  summary: 'å‚ä¸ OKX åˆçº¦åšå¸‚å•†è®¡åˆ’,ä¸ºæ°¸ç»­åˆçº¦å’ŒæœŸæƒæä¾›æµåŠ¨æ€§,äº«å— Maker è¿”ä½£æœ€é«˜ 0.02%,å åŠ å¹³å°æ¿€åŠ±å¥–åŠ±,å¹´åŒ– 30-100% APY,æ”¯æŒ API è‡ªåŠ¨åŒ–åšå¸‚ã€‚',

  category: 'orderbook',
  category_l1: 'derivatives',
  category_l2: 'è®¢å•ç°¿åšå¸‚',

  difficulty_level: 4,
  risk_level: 4,

  apy_min: 30,
  apy_max: 100,
  threshold_capital: '20000 ç¾å…ƒèµ·',
  threshold_capital_min: 20000,
  time_commitment: 'åˆå§‹è®¾ç½® 4 å°æ—¶(API + ç­–ç•¥),æ¯æ—¥ç›‘æ§ 2 å°æ—¶',
  time_commitment_minutes: 300,
  threshold_tech_level: 'advanced',

  content: `> **é€‚åˆäººç¾¤**: ä¸“ä¸šåšå¸‚è€…,è¡ç”Ÿå“äº¤æ˜“è€…
> **é˜…è¯»æ—¶é—´**: çº¦ 10 åˆ†é’Ÿ
> **å…³é”®è¯**: OKX / åˆçº¦åšå¸‚ / æœŸæƒåšå¸‚ / è¿”ä½£ / API

---

## ğŸ¯ ä»€ä¹ˆæ˜¯ OKX åˆçº¦åšå¸‚è®¡åˆ’?

### é¡¹ç›®æ¦‚è¿°

**OKX æµåŠ¨æ€§æ¿€åŠ±**:
- é’ˆå¯¹æ°¸ç»­åˆçº¦å’ŒæœŸæƒå¸‚åœº
- Maker è¿”ä½£ + åšå¸‚å¥–åŠ±
- æœˆåº¦æ’åå¥–é‡‘æ± 
- ä¸“å± API æ”¯æŒ

**è´¹ç‡ä¼˜åŠ¿**(åšå¸‚å•†ä¸“å±):

| äº§å“ | æ™®é€š Maker | åšå¸‚å•† Maker | è¿”ä½£ |
|------|-----------|-------------|------|
| æ°¸ç»­åˆçº¦ | 0.020% | **-0.005%** | âœ… |
| äº¤å‰²åˆçº¦ | 0.020% | **-0.005%** | âœ… |
| æœŸæƒ | 0.030% | **0.000%** | - |

**å…³é”®**: åšå¸‚å•†æŒ‚å•ä¸ä»…å…è´¹,è¿˜èƒ½è·å¾—è¿”ä½£!

---

## ğŸ“‹ å‚ä¸åšå¸‚è®¡åˆ’æŒ‡å—

### å‡†å¤‡å·¥ä½œ

**ç”³è¯·èµ„æ ¼**:
1. è¿‡å» 30 å¤©æ—¥å‡èµ„äº§ > $100,000
2. æˆ–æ‰¿è¯ºæ—¥å‡åšå¸‚é‡ > $5M
3. æäº¤åšå¸‚è®¡åˆ’å’Œç­–ç•¥è¯´æ˜

**ç”³è¯·æµç¨‹**:
\`\`\`
1. è”ç³» OKX æœºæ„ä¸šåŠ¡(mm@okx.com)
2. æäº¤èµ„æ–™:
   - èµ„é‡‘è¯æ˜
   - åšå¸‚ç­–ç•¥æ¦‚è¿°
   - é¢„æœŸäº¤æ˜“é‡
3. ç­‰å¾…å®¡æ ¸(3-7 ä¸ªå·¥ä½œæ—¥)
4. è·æ‰¹åå¼€é€šä¸“å± API
\`\`\`

### æ“ä½œæµç¨‹

**æ­¥éª¤ 1: é…ç½® API**

**ç”Ÿæˆ API å¯†é’¥**:
1. OKX åå° â†’ API ç®¡ç†
2. åˆ›å»ºäº¤æ˜“ API(éœ€è¦åŒé‡éªŒè¯)
3. é…ç½® IP ç™½åå•

**API æƒé™**:
- âœ… è¯»å–è´¦æˆ·ä¿¡æ¯
- âœ… äº¤æ˜“(ç°è´§/åˆçº¦)
- âŒ æå¸(å®‰å…¨è€ƒè™‘)

**æ­¥éª¤ 2: å¼€å‘åšå¸‚ç­–ç•¥**

**æ°¸ç»­åˆçº¦åšå¸‚**(Python ç¤ºä¾‹):

```python
import okx.Trade as Trade
import okx.MarketData as Market
import time

# åˆå§‹åŒ– API
tradeAPI = Trade.TradeAPI(api_key, secret_key, passphrase, use_server_time=False, flag='0')
marketAPI = Market.MarketAPI(flag='0')

# åšå¸‚å‚æ•°
instId = 'BTC-USDT-SWAP'  # BTC æ°¸ç»­
spread = 0.0003  # 0.03% ä»·å·®
size = '1'  # æ¯å• 1 å¼ åˆçº¦

def get_mid_price(instId):
    """è·å–ä¸­é—´ä»·"""
    ticker = marketAPI.get_ticker(instId=instId)
    bid = float(ticker['data'][0]['bidPx'])
    ask = float(ticker['data'][0]['askPx'])
    return (bid + ask) / 2

def cancel_all_orders(instId):
    """å–æ¶ˆæ‰€æœ‰æŒ‚å•"""
    orders = tradeAPI.get_order_list(instType='SWAP')
    for order in orders['data']:
        if order['instId'] == instId and order['state'] == 'live':
            tradeAPI.cancel_order(instId=instId, ordId=order['ordId'])

def place_mm_orders(instId, mid_price, spread, size):
    """æŒ‚ä¹°å–å•"""
    cancel_all_orders(instId)

    # è®¡ç®—ä¹°å–ä»·
    bid_price = round(mid_price * (1 - spread), 1)
    ask_price = round(mid_price * (1 + spread), 1)

    # æŒ‚ä¹°å•
    buy_order = tradeAPI.place_order(
        instId=instId,
        tdMode='cross',  # å…¨ä»“æ¨¡å¼
        side='buy',
        ordType='limit',
        px=str(bid_price),
        sz=size
    )

    # æŒ‚å–å•
    sell_order = tradeAPI.place_order(
        instId=instId,
        tdMode='cross',
        side='sell',
        ordType='limit',
        px=str(ask_price),
        sz=size
    )

    print(f'[{instId}] æŒ‚å•: Buy {bid_price} | Sell {ask_price}')
    return buy_order, sell_order

# ä¸»å¾ªç¯
while True:
    try:
        mid_price = get_mid_price(instId)
        place_mm_orders(instId, mid_price, spread, size)
        time.sleep(3)  # æ¯ 3 ç§’æ›´æ–°
    except Exception as e:
        print(f'é”™è¯¯: {e}')
        time.sleep(10)
```

**æ­¥éª¤ 3: æœŸæƒåšå¸‚**(é«˜çº§)

**æœŸæƒåšå¸‚è¦ç‚¹**:
- ä½¿ç”¨ Black-Scholes æ¨¡å‹å®šä»·
- ç›‘æ§éšå«æ³¢åŠ¨ç‡(IV)
- åŠ¨æ€è°ƒæ•´ä»·å·®

```python
import numpy as np
from scipy.stats import norm

def black_scholes_call(S, K, T, r, sigma):
    """Black-Scholes çœ‹æ¶¨æœŸæƒå®šä»·"""
    d1 = (np.log(S/K) + (r + sigma**2/2)*T) / (sigma*np.sqrt(T))
    d2 = d1 - sigma*np.sqrt(T)
    call = S*norm.cdf(d1) - K*np.exp(-r*T)*norm.cdf(d2)
    return call

# ç¤ºä¾‹: BTC $40,000, è¡Œæƒä»· $42,000, 30 å¤©åˆ°æœŸ
S = 40000  # ç°ä»·
K = 42000  # è¡Œæƒä»·
T = 30/365  # åˆ°æœŸæ—¶é—´(å¹´)
r = 0.05  # æ— é£é™©åˆ©ç‡
sigma = 0.8  # æ³¢åŠ¨ç‡ 80%

fair_value = black_scholes_call(S, K, T, r, sigma)
print(f'æœŸæƒå…¬å…ä»·å€¼: ${fair_value:.2f}')

# åšå¸‚ä»·æ ¼
bid_price = fair_value * 0.98  # -2%
ask_price = fair_value * 1.02  # +2%
print(f'åšå¸‚ä»·: Bid ${bid_price:.2f} | Ask ${ask_price:.2f}')
```

---

## ğŸ’° æ”¶ç›Šæ¡ˆä¾‹

### æ¡ˆä¾‹ 1: æ°¸ç»­åˆçº¦åšå¸‚

**åˆå§‹èµ„é‡‘**: $50,000

**å‚æ•°**:
- Maker è¿”ä½£: -0.005%
- ä»·å·®: 0.03%
- æ—¥æˆäº¤ $1,000,000(åŒè¾¹)

**æ”¶ç›Š**:
```
æ—¥è¿”ä½£ = $1M Ã— 0.005% = $50
æ—¥ä»·å·®åˆ©æ¶¦ = $1M/2 Ã— 0.03% = $150
æ—¥æ€»æ”¶ç›Š = $200

æœˆæ”¶ç›Š = $200 Ã— 30 = $6,000
å¹´åŒ– = $6,000 Ã— 12 / $50,000 = 144%
```

**é¢å¤–å¥–åŠ±**(æœˆåº¦æ’åå‰ 10):
- å¥–é‡‘æ±  $50,000
- æŒ‰äº¤æ˜“é‡åˆ†é…
- é¢å¤– +20-50% å¹´åŒ–

---

### æ¡ˆä¾‹ 2: æœŸæƒåšå¸‚

**åˆå§‹èµ„é‡‘**: $100,000

**å‚æ•°**:
- æœŸæƒä»·å·®: 2-5%(æœŸæƒæµåŠ¨æ€§å·®)
- æ—¥æˆäº¤ $200,000

**æ”¶ç›Š**:
```
æ—¥ä»·å·®åˆ©æ¶¦ = $200,000 Ã— 3% / 2 = $3,000
æœˆæ”¶ç›Š = $3,000 Ã— 30 = $90,000
å¹´åŒ– = $90,000 Ã— 12 / $100,000 = 1080%
```

**é£é™©**: æœŸæƒé£é™©æé«˜,éœ€è¦ä¸“ä¸šå¯¹å†²ç­–ç•¥

---

## ğŸ”¥ é«˜çº§ç­–ç•¥

### ç­–ç•¥ 1: Delta ä¸­æ€§åšå¸‚

**å¯¹å†²æ–¹å‘é£é™©**:
1. æ°¸ç»­åˆçº¦åšå¸‚
2. å®æ—¶è®¡ç®— Delta
3. åœ¨ç°è´§å¸‚åœºåå‘å¯¹å†²

### ç­–ç•¥ 2: æ³¢åŠ¨ç‡å¥—åˆ©

**æœŸæƒåšå¸‚ + Vega å¯¹å†²**:
- åšå¸‚å¤šä¸ªä¸åŒåˆ°æœŸæ—¥çš„æœŸæƒ
- å¯¹å†² Vega(æ³¢åŠ¨ç‡é£é™©)
- èµšå–ä»·å·®,è§„é¿ IV æ³¢åŠ¨

### ç­–ç•¥ 3: è·¨å¸‚åœºå¥—åˆ©

**OKX ä¸å…¶ä»–å¹³å°ä»·å·®**:
- åœ¨ OKX åšå¸‚
- åœ¨ Binance/Bybit å¯¹å†²
- èµšå–è·¨å¹³å°ä»·å·®

---

## âš ï¸ é£é™©æç¤º

### ä¸»è¦é£é™©

**1. åˆçº¦çˆ†ä»“é£é™©**:
- åšå¸‚éœ€è¦æŒä»“
- æç«¯è¡Œæƒ…å¯èƒ½çˆ†ä»“
- å¿…é¡»è®¾ç½®æ­¢æŸ

**2. æœŸæƒé£é™©**:
- Greeks é£é™©(Delta, Gamma, Vega, Theta)
- éœ€è¦ä¸“ä¸šçŸ¥è¯†å’Œå¯¹å†²å·¥å…·

**3. API é£é™©**:
- ç½‘ç»œå»¶è¿Ÿ
- API é™é¢‘
- è®¢å•æ‹’ç»

**4. æ”¿ç­–å˜åŒ–**:
- åšå¸‚å•†è®¡åˆ’å¯èƒ½è°ƒæ•´
- è¿”ä½£æ¯”ä¾‹å˜åŒ–

---

## ğŸ“Š æ€»ç»“

OKX åˆçº¦åšå¸‚æ˜¯é«˜é£é™©é«˜å›æŠ¥ç­–ç•¥:

**æ ¸å¿ƒä¼˜åŠ¿**:
1. **é«˜è¿”ä½£**: -0.005% Maker è´¹ç‡
2. **é¢å¤–å¥–åŠ±**: æœˆåº¦å¥–é‡‘æ± 
3. **äº§å“ä¸°å¯Œ**: æ°¸ç»­ + æœŸæƒ

**é€‚åˆäººç¾¤**:
- ä¸“ä¸šåšå¸‚è€…
- æœ‰è¡ç”Ÿå“ç»éªŒ
- ç†Ÿæ‚‰ç¼–ç¨‹å’Œ API

**ä¸é€‚åˆ**:
- æ–°æ‰‹äº¤æ˜“è€…
- å°èµ„é‡‘(< $20K)
- ä¸æ‡‚æœŸæƒå’Œå¯¹å†²

**æ¨è**: èµ„æ·±äº¤æ˜“è€…å¯å°è¯•,æ°¸ç»­åˆçº¦åšå¸‚ç›¸å¯¹å®‰å…¨,æœŸæƒåšå¸‚éœ€è°¨æ…ã€‚

OKX åˆçº¦åšå¸‚,ä¸“ä¸šç©å®¶çš„èˆå°!ğŸ¯
`,

  steps: [
    { step_number: 1, title: 'ç”³è¯·åšå¸‚å•†èµ„æ ¼', description: 'è”ç³» OKX æœºæ„ä¸šåŠ¡,æäº¤èµ„æ–™ç”³è¯·ã€‚', estimated_time: '1-2 å‘¨' },
    { step_number: 2, title: 'é…ç½® API', description: 'åˆ›å»ºäº¤æ˜“ API,è®¾ç½® IP ç™½åå•å’Œæƒé™ã€‚', estimated_time: '1 å°æ—¶' },
    { step_number: 3, title: 'å¼€å‘åšå¸‚ç­–ç•¥', description: 'ç¼–å†™æ°¸ç»­åˆçº¦æˆ–æœŸæƒåšå¸‚è„šæœ¬(Python)ã€‚', estimated_time: '2-3 å¤©' },
    { step_number: 4, title: 'å›æµ‹ä¸ä¼˜åŒ–', description: 'å†å²æ•°æ®å›æµ‹,ä¼˜åŒ–å‚æ•°ã€‚', estimated_time: '1 å‘¨' },
    { step_number: 5, title: 'å®ç›˜è¿è¡Œ', description: 'éƒ¨ç½²åˆ° VPS,å®ç›˜è¿è¡Œå¹¶ç›‘æ§ã€‚', estimated_time: 'æ¯æ—¥ 2 å°æ—¶' },
  ],
};

// ===== 12.6 Bybit åšå¸‚å•†æ¿€åŠ± =====
const STRATEGY_12_6 = {
  title: 'Bybit åšå¸‚å•†æ¿€åŠ± - åˆçº¦æµåŠ¨æ€§æŒ–çŸ¿',
  slug: 'orderbook-12-6-bybit-market-maker-incentive',
  summary: 'å‚ä¸ Bybit åˆçº¦æµåŠ¨æ€§æä¾›è€…è®¡åˆ’,äº«å— Maker è¿”ä½£ + äº¤æ˜“æŒ–çŸ¿åŒé‡æ”¶ç›Š,BIT ä»£å¸å¥–åŠ±,å¹´åŒ– 25-90% APY,æ”¯æŒ USDT å’Œ USDC æ°¸ç»­åˆçº¦åšå¸‚ã€‚',

  category: 'orderbook',
  category_l1: 'derivatives',
  category_l2: 'è®¢å•ç°¿åšå¸‚',

  difficulty_level: 3,
  risk_level: 3,

  apy_min: 25,
  apy_max: 90,
  threshold_capital: '10000 ç¾å…ƒèµ·',
  threshold_capital_min: 10000,
  time_commitment: 'åˆå§‹è®¾ç½® 3 å°æ—¶,æ¯æ—¥ç›‘æ§ 1 å°æ—¶',
  time_commitment_minutes: 210,
  threshold_tech_level: 'advanced',

  content: `> **é€‚åˆäººç¾¤**: CEX åšå¸‚è€…,API äº¤æ˜“è€…
> **é˜…è¯»æ—¶é—´**: çº¦ 8 åˆ†é’Ÿ
> **å…³é”®è¯**: Bybit / æµåŠ¨æ€§æŒ–çŸ¿ / Maker è¿”ä½£ / BIT ä»£å¸

---

## ğŸ¯ ä»€ä¹ˆæ˜¯ Bybit åšå¸‚å•†æ¿€åŠ±?

### é¡¹ç›®æ¦‚è¿°

**åŒé‡æ”¶ç›Š**:
1. **Maker è¿”ä½£**: æŒ‚å•æˆäº¤è¿”è¿˜æ‰‹ç»­è´¹
2. **äº¤æ˜“æŒ–çŸ¿**: èµšå– BIT ä»£å¸å¥–åŠ±

**è´¹ç‡ç»“æ„**(VIP ç”¨æˆ·):

| VIP ç­‰çº§ | Maker è´¹ç‡ | Taker è´¹ç‡ | BIT å¥–åŠ± |
|---------|-----------|-----------|---------|
| VIP 0 | 0.0200% | 0.0550% | - |
| VIP 1 | 0.0160% | 0.0500% | âœ… |
| VIP 2 | 0.0120% | 0.0450% | âœ… |
| VIP Pro | **-0.0050%** | 0.0300% | âœ…âœ… |

**VIP Pro é—¨æ§›**: 30 å¤©äº¤æ˜“é‡ > $10M æˆ–èµ„äº§ > $500K

---

## ğŸ“‹ å‚ä¸æŒ‡å—

### å‡†å¤‡å·¥ä½œ

**è¾¾æˆ VIP Pro**:
- **æ–¹æ³• A**: åˆ·äº¤æ˜“é‡è‡³ $10M/æœˆ
- **æ–¹æ³• B**: æŒä»“ > $500K
- **æ–¹æ³• C**: ç”³è¯·æœºæ„åšå¸‚å•†(æ¨è)

**æœºæ„åšå¸‚å•†ç”³è¯·**:
```
1. è®¿é—® Bybit å®˜ç½‘ â†’ æœºæ„æœåŠ¡
2. å¡«å†™ç”³è¯·è¡¨:
   - å…¬å¸ä¿¡æ¯(ä¸ªäººå¯ç”¨ä¸ªä½“æˆ·)
   - èµ„é‡‘è¯æ˜($50K+)
   - åšå¸‚ç­–ç•¥ç®€è¿°
3. ç­‰å¾…å®¡æ ¸(5-10 ä¸ªå·¥ä½œæ—¥)
4. è·æ‰¹åäº«å—æœ€ä¼˜è´¹ç‡
```

### æ“ä½œæµç¨‹

**æ­¥éª¤ 1: API é…ç½®**

**åˆ›å»º API**:
1. Bybit è´¦æˆ· â†’ API ç®¡ç†
2. åˆ›å»º Unified Trading API
3. æƒé™: è¯»å– + äº¤æ˜“(ä¸è¦å‹¾é€‰æå¸)
4. æ·»åŠ  IP ç™½åå•

**æ­¥éª¤ 2: åšå¸‚ç­–ç•¥**

**ç®€å•åŒè¾¹æŒ‚å•**(Python + pybit):

```python
from pybit.unified_trading import HTTP
import time

# åˆå§‹åŒ– Bybit
session = HTTP(
    testnet=False,
    api_key="YOUR_API_KEY",
    api_secret="YOUR_API_SECRET",
)

# å‚æ•°
symbol = "BTCUSDT"
spread = 0.0004  # 0.04% ä»·å·®
qty = "0.01"  # æ¯å• 0.01 BTC

def get_mid_price(symbol):
    """è·å–ä¸­é—´ä»·"""
    ticker = session.get_tickers(category="linear", symbol=symbol)
    bid = float(ticker['result']['list'][0]['bid1Price'])
    ask = float(ticker['result']['list'][0]['ask1Price'])
    return (bid + ask) / 2

def cancel_all(symbol):
    """å–æ¶ˆæ‰€æœ‰è®¢å•"""
    session.cancel_all_orders(category="linear", symbol=symbol)

def place_orders(symbol, mid_price, spread, qty):
    """æŒ‚åŒè¾¹è®¢å•"""
    cancel_all(symbol)

    bid_price = round(mid_price * (1 - spread), 1)
    ask_price = round(mid_price * (1 + spread), 1)

    # æŒ‚ä¹°å•
    session.place_order(
        category="linear",
        symbol=symbol,
        side="Buy",
        orderType="Limit",
        qty=qty,
        price=str(bid_price),
        timeInForce="PostOnly",  # ç¡®ä¿æŒ‚å•
    )

    # æŒ‚å–å•
    session.place_order(
        category="linear",
        symbol=symbol,
        side="Sell",
        orderType="Limit",
        qty=qty,
        price=str(ask_price),
        timeInForce="PostOnly",
    )

    print(f'[{symbol}] Buy {bid_price} | Sell {ask_price}')

# ä¸»å¾ªç¯
while True:
    try:
        mid = get_mid_price(symbol)
        place_orders(symbol, mid, spread, qty)
        time.sleep(5)
    except Exception as e:
        print(f'Error: {e}')
        time.sleep(10)
```

**æ­¥éª¤ 3: äº¤æ˜“æŒ–çŸ¿(BIT å¥–åŠ±)**

**BIT å¥–åŠ±è§„åˆ™**:
- æ¯æ—¥äº¤æ˜“é‡è¶Šé«˜,BIT å¥–åŠ±è¶Šå¤š
- VIP ç”¨æˆ·å¥–åŠ±ç¿»å€
- BIT å¯æç°æˆ–æŠµæ‰£æ‰‹ç»­è´¹

**æŸ¥çœ‹ BIT æ”¶ç›Š**:
```python
# è·å– BIT ä½™é¢
balance = session.get_wallet_balance(accountType="UNIFIED", coin="BIT")
bit_balance = balance['result']['list'][0]['coin'][0]['walletBalance']
print(f'BIT ä½™é¢: {bit_balance}')
```

---

## ğŸ’° æ”¶ç›Šæ¡ˆä¾‹

### æ¡ˆä¾‹ 1: VIP Pro åšå¸‚

**åˆå§‹èµ„é‡‘**: $50,000

**å‚æ•°**:
- Maker è¿”ä½£: -0.005%
- ä»·å·®: 0.04%
- æ—¥æˆäº¤ $800,000

**æ”¶ç›Š**:
```
æ—¥è¿”ä½£ = $800K Ã— 0.005% = $40
æ—¥ä»·å·® = $800K/2 Ã— 0.04% = $160
æ—¥æ€»è®¡ = $200

å¹´åŒ–(ä»…åšå¸‚) = $200 Ã— 365 / $50K = 146%
```

**åŠ ä¸Š BIT å¥–åŠ±**(å‡è®¾æ—¥å‡ 100 BIT,BIT = $0.5):
```
æ—¥ BIT æ”¶ç›Š = 100 Ã— $0.5 = $50
æ€»å¹´åŒ– = ($200 + $50) Ã— 365 / $50K = 182.5%
```

---

### æ¡ˆä¾‹ 2: å¤šå¸ç§åˆ†æ•£

**èµ„é‡‘åˆ†é…**:
- BTC: $20,000
- ETH: $15,000
- SOL: $10,000
- å…¶ä»–å±±å¯¨: $5,000

**ä¼˜åŠ¿**:
- å±±å¯¨å¸ä»·å·®æ›´å¤§(0.1-0.5%)
- åˆ†æ•£é£é™©
- æ€»æ”¶ç›Šå¯èƒ½æ›´é«˜

---

## ğŸ”¥ é«˜çº§ç­–ç•¥

### ç­–ç•¥ 1: åŠ¨æ€ä»·å·®

**æ ¹æ®æ³¢åŠ¨ç‡è°ƒæ•´**:
```python
import numpy as np

def calculate_volatility(prices):
    """è®¡ç®—å†å²æ³¢åŠ¨ç‡"""
    returns = np.diff(np.log(prices))
    return np.std(returns) * np.sqrt(365)

# è·å–å†å²ä»·æ ¼
klines = session.get_kline(category="linear", symbol="BTCUSDT", interval="5", limit=100)
prices = [float(k['close']) for k in klines['result']['list']]

vol = calculate_volatility(prices)

# åŠ¨æ€è°ƒæ•´ä»·å·®
if vol > 0.8:  # é«˜æ³¢åŠ¨
    spread = 0.001  # åŠ å®½ä»·å·®
elif vol < 0.4:  # ä½æ³¢åŠ¨
    spread = 0.0002  # ç¼©å°ä»·å·®
else:
    spread = 0.0004  # æ­£å¸¸
```

### ç­–ç•¥ 2: åº“å­˜ç®¡ç†

**é¿å…å•å‘ç´¯ç§¯**:
```python
def get_position(symbol):
    """è·å–æŒä»“"""
    position = session.get_positions(category="linear", symbol=symbol)
    size = float(position['result']['list'][0]['size'])
    side = position['result']['list'][0]['side']
    return size if side == 'Buy' else -size

pos = get_position("BTCUSDT")

# å¦‚æœå¤šå¤´è¿‡å¤š,å¢åŠ å–å•
if pos > 0.5:
    sell_qty = qty * 1.5  # å¢åŠ å–å•é‡
    buy_qty = qty * 0.5   # å‡å°‘ä¹°å•é‡
elif pos < -0.5:
    sell_qty = qty * 0.5
    buy_qty = qty * 1.5
else:
    sell_qty = buy_qty = qty
```

---

## âš ï¸ é£é™©æç¤º

### ä¸»è¦é£é™©

**1. åˆçº¦é£é™©**:
- æ°¸ç»­åˆçº¦æœ‰çˆ†ä»“é£é™©
- å¿…é¡»æ§åˆ¶æ æ†

**2. BIT ä»·æ ¼é£é™©**:
- BIT ä»£å¸ä»·æ ¼æ³¢åŠ¨
- å¥–åŠ±å®é™…ä»·å€¼ä¸ç¡®å®š

**3. æŠ€æœ¯é£é™©**:
- API é™é¢‘
- ç½‘ç»œå»¶è¿Ÿ
- è®¢å•å¤±è´¥

**4. å¸‚åœºé£é™©**:
- æç«¯è¡Œæƒ…ä»·å·®æ‰©å¤§
- åšå¸‚ç­–ç•¥å¤±æ•ˆ

---

## ğŸ“Š æ€»ç»“

Bybit åšå¸‚å•†æ¿€åŠ±æ˜¯ CEX çš„ä¼˜è´¨ç­–ç•¥:

**æ ¸å¿ƒä¼˜åŠ¿**:
1. **åŒé‡æ”¶ç›Š**: è¿”ä½£ + BIT å¥–åŠ±
2. **é—¨æ§›é€‚ä¸­**: $10K å¯å¼€å§‹
3. **API å‹å¥½**: pybit åº“æ˜“ç”¨

**é€‚åˆäººç¾¤**:
- æœ‰ç¼–ç¨‹åŸºç¡€
- ç†Ÿæ‚‰æ°¸ç»­åˆçº¦
- èµ„é‡‘ $10K+

**ä¸é€‚åˆ**:
- å®Œå…¨æ–°æ‰‹
- ä¸æ‡‚ API
- æ— æ³•æ‰¿å—åˆçº¦é£é™©

**æ¨è**: ä¸­çº§äº¤æ˜“è€…å¯ä½œä¸ºä¸»åŠ›ç­–ç•¥,å¹´åŒ– 50-150%ã€‚

Bybit åšå¸‚,æ€§ä»·æ¯”ä¹‹é€‰!ğŸ’
`,

  steps: [
    { step_number: 1, title: 'è¾¾æˆ VIP Pro', description: 'åˆ·äº¤æ˜“é‡æˆ–ç”³è¯·æœºæ„åšå¸‚å•†ã€‚', estimated_time: '1-2 å‘¨' },
    { step_number: 2, title: 'é…ç½® API', description: 'åˆ›å»º Unified Trading API,è®¾ç½®æƒé™ã€‚', estimated_time: '1 å°æ—¶' },
    { step_number: 3, title: 'ç¼–å†™ç­–ç•¥', description: 'ç”¨ Python + pybit å¼€å‘åšå¸‚è„šæœ¬ã€‚', estimated_time: '1-2 å¤©' },
    { step_number: 4, title: 'éƒ¨ç½²è¿è¡Œ', description: 'ç§Ÿç”¨ VPS,éƒ¨ç½²ç­–ç•¥å¹¶è¿è¡Œã€‚', estimated_time: '2 å°æ—¶' },
    { step_number: 5, title: 'ç›‘æ§ä¼˜åŒ–', description: 'æ¯æ—¥ç›‘æ§æˆäº¤ã€æ”¶ç›Šã€BIT å¥–åŠ±ã€‚', estimated_time: 'æ¯æ—¥ 1 å°æ—¶' },
  ],
};

// ===== ä¸Šä¼ é€»è¾‘ =====
async function getAuthToken() {
  const response = await axios.post(`${DIRECTUS_URL}/auth/login`, {
    email: 'the_uk1@outlook.com',
    password: 'Mygcdjmyxzg2026!',
  });
  return response.data.data.access_token;
}

async function addStrategies() {
  try {
    const token = await getAuthToken();
    const strategies = [STRATEGY_12_5, STRATEGY_12_6];

    console.log('\nå¼€å§‹åˆ›å»º 12.5 å’Œ 12.6 ç­–ç•¥...\n');

    for (let i = 0; i < strategies.length; i++) {
      const strategy = {
        ...strategies[i],
        status: 'published',
        is_featured: true,
        view_count: 0,
        bookmark_count: 0,
        published_at: new Date().toISOString(),
      };

      const response = await axios.post(
        `${DIRECTUS_URL}/items/strategies`,
        strategy,
        {
          headers: {
            Authorization: `Bearer ${token}`,
            'Content-Type': 'application/json',
          },
        }
      );

      console.log(`âœ… [${i + 1}/2] ${strategy.title}`);
      console.log(`   ID: ${response.data.data.id}`);
      console.log(`   Slug: ${response.data.data.slug}\n`);
    }

    console.log('ğŸ‰ åˆ›å»ºå®Œæˆï¼');
    console.log('è®¿é—®: http://localhost:3000/strategies?category=orderbook\n');
  } catch (error) {
    console.error('\nâŒ åˆ›å»ºå¤±è´¥:', error.response?.data || error.message);
  }
}

addStrategies();