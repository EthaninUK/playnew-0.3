# Directus æƒé™é…ç½®å¿«é€Ÿä¿®å¤

## ä½ å½“å‰åœ¨åšä»€ä¹ˆ

é…ç½® Public è§’è‰²å¯¹ strategies é›†åˆçš„ Read æƒé™çš„ Item Permissions (é¡¹ç›®æƒé™è¿‡æ»¤è§„åˆ™)

## é—®é¢˜

æˆªå›¾æ˜¾ç¤º: `status Contains --`

è¿™ä¸ªé…ç½®ä¸æ­£ç¡®!

## è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ A: ç®€å•æ¨¡å¼ - å…è®¸è¯»å–æ‰€æœ‰æ•°æ®

**é€‚ç”¨äº**: æµ‹è¯•ç¯å¢ƒï¼Œæˆ–è€…ä½ æƒ³å…¬å¼€æ‰€æœ‰ç©æ³•æ•°æ®

1. **åˆ é™¤è¿‡æ»¤è§„åˆ™**
   - æ‰¾åˆ° Rule æ—è¾¹çš„åˆ é™¤æŒ‰é’® (å¯èƒ½æ˜¯ Ã— æˆ– Remove)
   - ç‚¹å‡»åˆ é™¤
   - Item Permissions éƒ¨åˆ†åº”è¯¥å˜æˆç©ºç™½æˆ–æ˜¾ç¤º "No rules"

2. **ä¿å­˜**
   - ç‚¹å‡»å³ä¸Šè§’çš„è“è‰² âœ“ æŒ‰é’®

3. **å®Œæˆ!**
   - ç°åœ¨æ‰€æœ‰ strategies æ•°æ®éƒ½å¯ä»¥è¢«å…¬å¼€è¯»å–

---

### æ–¹æ¡ˆ B: å®‰å…¨æ¨¡å¼ - åªå…è®¸è¯»å–å·²å‘å¸ƒçš„å†…å®¹

**é€‚ç”¨äº**: ç”Ÿäº§ç¯å¢ƒï¼Œåªæƒ³å…¬å¼€ status=published çš„æ•°æ®

**å½“å‰çŠ¶æ€**: `status Contains --` âŒ

**ç›®æ ‡çŠ¶æ€**: `status Equals published` âœ…

**æ“ä½œæ­¥éª¤**:

1. **ä¿®æ”¹æ“ä½œç¬¦**
   - ç‚¹å‡» `Contains` (åœ¨ status åé¢)
   - ä»ä¸‹æ‹‰èœå•é€‰æ‹©: **Equals** æˆ– **=** æˆ– **_eq**
   - (ä¸åŒç‰ˆæœ¬çš„ Directus æ˜¾ç¤ºå¯èƒ½ä¸åŒ)

2. **ä¿®æ”¹å€¼**
   - ç‚¹å‡» `--` (å€¼çš„ä½ç½®)
   - è¾“å…¥: `published`
   - (ç¡®ä¿æ‹¼å†™æ­£ç¡®ï¼Œå…¨å°å†™)

3. **éªŒè¯æ˜¾ç¤º**
   åº”è¯¥çœ‹åˆ°:
   ```
   status Equals published
   ```
   æˆ–è€…:
   ```
   status = published
   ```

4. **ä¿å­˜**
   - ç‚¹å‡»å³ä¸Šè§’çš„è“è‰² âœ“ æŒ‰é’®

---

## å­—æ®µé€‰æ‹©æ¡†çš„ä½œç”¨

ä½ æˆªå›¾ä¸­çœ‹åˆ°çš„å­—æ®µåˆ—è¡¨ (threshold_capital_min, threshold_tech_level, apy_min, etc.) æ˜¯ç”¨æ¥:
- **æ·»åŠ æ›´å¤šè¿‡æ»¤æ¡ä»¶**
- ä¾‹å¦‚: ä½ å¯ä»¥æ·»åŠ ç¬¬äºŒä¸ªæ¡ä»¶ `risk_level <= 3` (åªæ˜¾ç¤ºä½ä¸­é£é™©)

**ä½†å¯¹äºåŸºæœ¬é…ç½®ï¼Œä½ ä¸éœ€è¦ä½¿ç”¨è¿™ä¸ª!**

ç›´æ¥é…ç½® status è§„åˆ™å°±å¤Ÿäº†ã€‚

---

## é…ç½®å®Œ strategies å

å¯¹ä»¥ä¸‹é›†åˆé‡å¤ç›¸åŒçš„æ“ä½œ:

| é›†åˆ | æ¨èè§„åˆ™ |
|------|----------|
| **news** | `status Equals published` |
| **service_providers** | `status Equals active` æˆ– ä¸æ·»åŠ è§„åˆ™ |
| **categories** | ä¸æ·»åŠ è§„åˆ™ (å…è®¸è¯»å–æ‰€æœ‰åˆ†ç±») |
| **tags** | ä¸æ·»åŠ è§„åˆ™ (å…è®¸è¯»å–æ‰€æœ‰æ ‡ç­¾) |
| **chains** | `is_active Equals true` æˆ– ä¸æ·»åŠ è§„åˆ™ |
| **protocols** | `is_active Equals true` æˆ– ä¸æ·»åŠ è§„åˆ™ |

---

## éªŒè¯æƒé™é…ç½®æˆåŠŸ

é…ç½®å®Œæ‰€æœ‰é›†åˆåï¼Œåœ¨ç»ˆç«¯æµ‹è¯•:

```bash
# æµ‹è¯• 1: categories (åº”è¯¥è¿”å› 8 æ¡æ•°æ®)
curl http://localhost:8055/items/categories

# æµ‹è¯• 2: tags (åº”è¯¥è¿”å› 6 æ¡æ•°æ®)
curl http://localhost:8055/items/tags

# æµ‹è¯• 3: chains (åº”è¯¥è¿”å› 6 æ¡æ•°æ®)
curl http://localhost:8055/items/chains

# æµ‹è¯• 4: protocols (åº”è¯¥è¿”å› 5 æ¡æ•°æ®)
curl http://localhost:8055/items/protocols
```

**æˆåŠŸçš„æ ‡å¿—**:
- âœ… çœ‹åˆ° JSON æ•°æ® `{"data": [...]}`
- âŒ ä¸åº”è¯¥çœ‹åˆ° `"FORBIDDEN"` é”™è¯¯

---

## å¸¸è§é—®é¢˜

### Q: æˆ‘é…ç½®äº†æƒé™ï¼Œä½† API è¿˜æ˜¯è¿”å› FORBIDDEN?

**A: å¯èƒ½çš„åŸå› :**
1. æ²¡æœ‰ç‚¹ä¿å­˜æŒ‰é’® âœ“
2. åªé…ç½®äº†ä¸€ä¸ªé›†åˆï¼Œå…¶ä»–é›†åˆè¿˜æ²¡é…ç½®
3. éœ€è¦ç­‰å¾…å‡ ç§’é’Ÿè®© Directus åˆ·æ–°æƒé™ç¼“å­˜
4. å°è¯•é‡å¯ Directus: `docker-compose restart directus`

### Q: Field Permissions éœ€è¦é…ç½®å—?

**A:**
- ç‚¹å‡»å·¦ä¾§çš„ **Field Permissions** æ ‡ç­¾
- é€‰æ‹© **All Fields** (å…è®¸è¯»å–æ‰€æœ‰å­—æ®µ)
- æˆ–è€…æ‰‹åŠ¨å‹¾é€‰ä½ æƒ³å…¬å¼€çš„å­—æ®µ
- **æ¨è**: é€‰æ‹© All Fields ç®€åŒ–é…ç½®

### Q: æˆ‘æƒ³æ·»åŠ å¤šä¸ªè¿‡æ»¤æ¡ä»¶æ€ä¹ˆåŠ?

**A:**
- ç‚¹å‡» **Add Filter**
- ä»å­—æ®µåˆ—è¡¨é€‰æ‹©å¦ä¸€ä¸ªå­—æ®µ (ä¾‹å¦‚: risk_level)
- è®¾ç½®æ¡ä»¶ (ä¾‹å¦‚: `risk_level <= 3`)
- å¤šä¸ªæ¡ä»¶é»˜è®¤æ˜¯ AND å…³ç³» (åŒæ—¶æ»¡è¶³)

---

## ä¸‹ä¸€æ­¥

é…ç½®å¥½æƒé™å:

1. **æµ‹è¯• API è®¿é—®** (è§ä¸Šé¢çš„ curl å‘½ä»¤)
2. **åœ¨ Directus UI æ·»åŠ æ›´å¤šæ•°æ®**
3. **å¼€å§‹ Next.js å‰ç«¯å¼€å‘**

åŠ æ²¹! ğŸš€
