// ç­–ç•¥ 34.7 & 34.8: è¡ç”Ÿå“ç­–ç•¥ (Derivatives Strategies) - ç½‘æ ¼äº¤æ˜“ (è¶‹åŠ¿è¿½è¸ªç½‘æ ¼ & åŒºé—´çªç ´åœæ­¢ç½‘æ ¼)

const axios = require('axios');

/**
 * 34.7 è¶‹åŠ¿è¿½è¸ªç½‘æ ¼
 *
 * ä¸€çº§åˆ†ç±»: è¡ç”Ÿå“ç­–ç•¥ (Derivatives Strategies)
 * category_l1: derivatives
 * category: grid-trading
 * category_l2: grid-trading
 *
 * æ ¸å¿ƒï¼šç»“åˆ MA/EMA ç­‰è¶‹åŠ¿æŒ‡æ ‡ï¼Œåœ¨ä¸Šå‡è¶‹åŠ¿ä¸­é€æ­¥æŠ¬é«˜ç½‘æ ¼åŒºé—´å’Œä¹°å…¥ä»·ï¼Œ
 *       ä¸€è¾¹â€œåƒéœ‡è¡â€ï¼Œä¸€è¾¹â€œè·Ÿè¶‹åŠ¿â€ï¼Œé¿å…é•¿æœŸåœç•™åœ¨æ˜æ˜¾åä½çš„è€åŒºé—´ã€‚
 */
const STRATEGY_34_7 = {
  title: 'è¶‹åŠ¿è¿½è¸ªç½‘æ ¼ - ç»“åˆ MA/EMA åœ¨ä¸Šå‡è¶‹åŠ¿ä¸­åŠ¨æ€æŠ¬å‡ç½‘æ ¼é”å®šåˆ©æ¶¦',
  slug: 'trend-following-grid-ma-ema',
  summary:
    'è¶‹åŠ¿è¿½è¸ªç½‘æ ¼æ˜¯åœ¨ä¼ ç»Ÿå›ºå®šåŒºé—´ç½‘æ ¼åŸºç¡€ä¸ŠåŠ å…¥è¶‹åŠ¿å› å­ï¼šé€šè¿‡æ£€æµ‹ä»·æ ¼ç›¸å¯¹ MA/EMAï¼ˆä»¥åŠå…¶ä»–è¶‹åŠ¿æŒ‡æ ‡ï¼‰çš„å…³ç³»ï¼Œåœ¨ç¡®è®¤ä¸Šå‡è¶‹åŠ¿æˆç«‹æ—¶ï¼Œé€æ­¥ä¸Šç§»ç½‘æ ¼åŒºé—´å’Œä¹°å…¥æ¡£ä½ï¼Œè®©ç½‘æ ¼ä¸å†â€œæ­»å®ˆè€åŒºé—´â€ï¼Œè€Œæ˜¯è¾¹åƒéœ‡è¡è¾¹é¡ºåŠ¿æŠ¬é«˜æŒä»“æˆæœ¬åŒºé—´ã€‚æ ¸å¿ƒç›®æ ‡æ˜¯ï¼šé¿å…ç½‘æ ¼åœ¨æ˜æ˜¾ä¸Šæ¶¨å‘¨æœŸä¸­ä¸€ç›´åœ¨ä½ä½â€œå–é£â€ï¼Œå¹¶ä¸»åŠ¨é”å®šä¸€éƒ¨åˆ†å·²èµšåˆ°çš„æµ®ç›ˆï¼ŒåŒæ—¶ç»§ç»­å‚ä¸åç»­æ¶¨åŠ¿ã€‚',
  category: 'grid-trading',
  category_l1: 'derivatives',
  category_l2: 'grid-trading',
  risk_level: 4,
  apy_min: 8,
  apy_max: 50,
  min_investment: 1000,
  time_commitment:
    'éœ€è¦æ—¥åº¦/å‘¨åº¦çº§åˆ«çš„è¶‹åŠ¿ç›‘æ§ä¸åŒºé—´è°ƒæ•´ï¼Œä¸é€‚åˆå®Œå…¨ä¸ç®¡çš„çº¯æŒ‚æœº',
  status: 'published',
  content: `# 34.7 è¶‹åŠ¿è¿½è¸ªç½‘æ ¼ - ç»“åˆ MA/EMA åœ¨ä¸Šå‡è¶‹åŠ¿ä¸­åŠ¨æ€æŠ¬å‡ç½‘æ ¼é”å®šåˆ©æ¶¦

> æ ¸å¿ƒä¸€å¥è¯ï¼š  
> - åœ¨â€œæœ‰è¶‹åŠ¿ + æœ‰éœ‡è¡â€çš„è¡Œæƒ…ä¸­ï¼Œ  
> - ä¸€è¾¹ç”¨ç½‘æ ¼åƒéœ‡è¡ï¼Œ  
> - ä¸€è¾¹ç”¨ MA/EMA ç­‰æŒ‡æ ‡åˆ¤æ–­è¶‹åŠ¿ï¼Œ  
> - åœ¨è¶‹åŠ¿ç¡®è®¤å‘ä¸Šæ—¶ï¼Œ**ä¸»åŠ¨ä¸Šç§»ç½‘æ ¼åŒºé—´**ï¼ŒæŠŠåˆ©æ¶¦å¾€ä¸Šâ€œæ¬å®¶â€ã€‚  

---

## ğŸ’° ç­–ç•¥æ¦‚è§ˆ

| ç»´åº¦              | å†…å®¹è¯´æ˜ |
|-------------------|----------|
| **ç­–ç•¥ç±»å‹**      | ç½‘æ ¼äº¤æ˜“ + è¶‹åŠ¿è¿½è¸ªï¼ˆMA/EMAï¼‰ |
| **é€‚ç”¨æ ‡çš„**      | ä¸­é•¿æœŸæœ‰è¶‹åŠ¿ã€çŸ­æœŸæœ‰éœ‡è¡çš„ä¸»æµå¸/é¾™å¤´æ¿å—ï¼ˆå¦‚ BTCã€ETHã€SOL ç­‰ï¼‰ |
| **ä¸»è¦ç›®æ ‡**      | é¿å…ç½‘æ ¼åœ¨ä¸Šæ¶¨è¶‹åŠ¿ä¸­é•¿æœŸåœç•™åœ¨ä½ä½åŒºé—´ï¼Œå¯¼è‡´â€œå–é£ä¸»å‡æµªâ€ |
| **æ”¶ç›Šæ¥æº**      | åŒºé—´éœ‡è¡å¸¦æ¥çš„ç½‘æ ¼å·®ä»·æ”¶ç›Š + è¶‹åŠ¿æŠ¬å‡å¸¦æ¥çš„æŒä»“æµ®ç›ˆ |
| **å…³é”®å‰æ**      | æ ‡çš„å…·å¤‡è¶‹åŠ¿æ€§ï¼ˆä¾‹å¦‚ç‰›å¸‚é˜¶æ®µçš„ä¸»æµå¸ï¼‰ä¸”æœ‰è¶³å¤Ÿçš„æ³¢åŠ¨åŒºé—´ |
| **ä¸»è¦é£é™©**      | è¶‹åŠ¿è¯†åˆ«é”™è¯¯ï¼ˆå‡çªç ´ï¼‰ã€è¿½æ¶¨è¿‡é«˜ã€é¢‘ç¹è°ƒæ•´åŒºé—´å¯¼è‡´æ‘©æ“¦æˆæœ¬ä¸Šå‡ |

---

## ğŸ“– åœºæ™¯æ•…äº‹ï¼šä»â€œä½ä½ç½‘æ ¼è¢«è¡Œæƒ…æŠ›å¼ƒâ€åˆ°â€œç½‘æ ¼æ­ä¸Šè¶‹åŠ¿ç”µæ¢¯â€

ä½ å¯èƒ½å·²ç»ä½“éªŒè¿‡è¿™ç§ç—›ï¼š

1. åœ¨ BTC 20k~25k åŒºé—´åšç½‘æ ¼ï¼š  
   - éœ‡è¡ä¸€æ®µæ—¶é—´ï¼Œç½‘æ ¼å¸®ä½ ç¨³å®šåƒåˆ°ä¸å°‘å·®ä»·ï¼›  
2. ç„¶åï¼ŒæŸä¸€å¤© BTC ç›´æ¥ä» 25k èµ·é£ï¼š  
   - å†²åˆ° 30kã€35kã€40kâ€¦â€¦  
   - ä½ çš„ç½‘æ ¼å•å­åœ¨ 25k~26kã€27k ä¸€è·¯å–é£ï¼›  
   - å›å¤´å‘ç°ï¼š  
     - ä½ä½ç­¹ç å–æ²¡äº†ï¼Œ  
     - ä¸Šé¢ä¹Ÿæ²¡ä»“ä½ï¼Œ  
     - ä½ â€œæ—¢æ²¡æ‹¿ä½è¶‹åŠ¿ï¼Œä¹Ÿæ²¡ç»§ç»­åƒé«˜ä½éœ‡è¡â€ã€‚

ä½ äº‹åå¤ç›˜ä¼šæƒ³ï¼š

> â€œå¦‚æœåœ¨ 20k~25k ç½‘æ ¼èµšåˆ°ä¸€äº›ä»¥åï¼Œ  
>  èƒ½ä¸èƒ½åœ¨è¶‹åŠ¿ç¡®è®¤å‘ä¸Šæ—¶ï¼Œ  
>  æŠŠæ•´ä¸ªç½‘æ ¼çš„åŒºé—´æ•´ä½“ä¸Šç§»ï¼Œ  
>  è®©å®ƒè·Ÿç€è¶‹åŠ¿ä¸€èµ·å¾€ä¸Šèµ°ï¼Ÿâ€

**è¶‹åŠ¿è¿½è¸ªç½‘æ ¼**å°±æ˜¯ä¸ºè¿™ç§è¯‰æ±‚è®¾è®¡çš„ï¼š

- ä¸å†æŠŠç½‘æ ¼å½“â€œæ°¸è¿œå›ºå®šåœ¨æŸä¸ªè€åŒºé—´â€çš„æœºå™¨ï¼›  
- è€Œæ˜¯æ ¹æ® **MA/EMA ç­‰è¶‹åŠ¿æŒ‡æ ‡**ï¼Œ  
  åœ¨è¶‹åŠ¿é˜¶æ®µé€æ­¥ä¸Šç§»ç½‘æ ¼åŒºé—´ï¼Œ  
  æŠŠå·²æœ‰åˆ©æ¶¦é”å®šï¼ŒåŒæ—¶è®©ç­–ç•¥ç»§ç»­å‚ä¸ä¹‹åçš„è¡Œæƒ…ã€‚

---

## ğŸ§  ç­–ç•¥æ ¸å¿ƒï¼šç½‘æ ¼é€»è¾‘ + è¶‹åŠ¿è¿‡æ»¤/è¿ç§»

### 1ï¸âƒ£ ç½‘æ ¼é€»è¾‘ï¼šåƒåŒºé—´æ³¢åŠ¨

ä¸ä¼ ç»Ÿç½‘æ ¼ä¸€è‡´ï¼š

- åœ¨æŸä¸ªåŒºé—´å†…ï¼ˆä¾‹å¦‚ 28k~38kï¼‰ï¼š  
  - ä¸‹æ–¹æŒ‚ä¹°å•ï¼ˆä½ä¹°ï¼‰ï¼›  
  - ä¸Šæ–¹æŒ‚å–å•ï¼ˆé«˜å–ï¼‰ï¼›  
- å½“ä»·æ ¼åœ¨åŒºé—´é‡Œéœ‡è¡ï¼š  
  - ä¸æ–­å®ç°â€œä½ä¹°é«˜å–â€çš„ç½‘æ ¼å·®ä»·æ”¶ç›Šã€‚

### 2ï¸âƒ£ è¶‹åŠ¿è¯†åˆ«ï¼šç”¨ MA/EMA åšâ€œé£å‘æ ‡â€

å¸¸è§åšæ³•ï¼š

- ä½¿ç”¨ä¸€ä¸ªæˆ–å¤šä¸ªå‡çº¿æŒ‡æ ‡ï¼Œä¾‹å¦‚ï¼š  
  - EMA50 / EMA100 / EMA200ï¼ˆ4å°æ—¶çº§æˆ–æ—¥çº¿çº§ï¼‰ï¼›  
- å½“ä»·æ ¼ç«™ä¸ŠæŸæ¡å…³é”®å‡çº¿ï¼Œå¹¶ä¸”å‡çº¿ç³»ç»Ÿå‘ˆç°å¤šå¤´æ’åˆ—ï¼š  
  - è®¤ä¸ºè¶‹åŠ¿åå¤šï¼›  
- å½“ä»·æ ¼è·Œç ´å…³é”®å‡çº¿ã€å‡çº¿æ‹å¤´å‘ä¸‹ï¼š  
  - è®¤ä¸ºè¶‹åŠ¿å‡å¼±ç”šè‡³åè½¬ã€‚

ä¸€ä¸ªç®€åŒ–é€»è¾‘ç¤ºæ„ï¼š

- è¶‹åŠ¿çœ‹å¤šè§¦å‘æ¡ä»¶ï¼ˆç¤ºä¾‹ï¼‰ï¼š  
  - ä»·æ ¼ > EMA50 > EMA100ï¼ˆ4 å°æ—¶çº§ï¼‰  
  - ä¸” EMA50 æ–œç‡ > 0ï¼ˆåœ¨æŠ¬å¤´ï¼‰  
  - ä¸”æˆäº¤é‡/é“¾ä¸Šæ•°æ®æ”¯æŒè¡Œæƒ…æŒç»­ï¼›
- è¶‹åŠ¿å‡å¼±/åè½¬æ¡ä»¶ï¼š  
  - ä»·æ ¼è·Œç ´ EMA50 / EMA100  
  - æˆ– EMA50 å‘ä¸‹æ­»å‰ EMA100ã€‚  

### 3ï¸âƒ£ ç½‘æ ¼è¿ç§»ï¼šè¶‹åŠ¿å‘ä¸Šæ—¶ä¸Šç§»åŒºé—´

å½“è¶‹åŠ¿çœ‹å¤šä¿¡å·æŒç»­ä¸€æ®µæ—¶é—´æ—¶ï¼Œ  
ç­–ç•¥å¯ä»¥è§¦å‘ä¸€ä¸ªâ€œç½‘æ ¼åŒºé—´é‡æ„/ä¸Šç§»â€çš„è¡Œä¸ºï¼š

- ä¾‹å¦‚åŸåŒºé—´ä¸ºï¼š 28k ~ 38kï¼›  
- BTC å·²ç»é•¿æ—¶é—´åœ¨ 34k~40k æ´»åŠ¨ï¼Œå‡çº¿æ˜¾ç¤ºè¶‹åŠ¿ä»ç„¶åå¤šï¼›  
- ç­–ç•¥å†³ç­–ï¼š  
  - å°†ç½‘æ ¼åŒºé—´æ•´ä½“ä¸Šç§»åˆ°ï¼š35k ~ 45kï¼›  
  - åœ¨åŒºé—´è¿ç§»å‰ï¼Œ  
    - å¹³æ‰è€åŒºé—´å†…ä¸€äº›å‰©ä½™æŒ‚å•/æŒä»“ï¼›  
    - é”å®šä¸€éƒ¨åˆ†å·²æœ‰åˆ©æ¶¦ï¼›  
  - åœ¨æ–°åŒºé—´é‡æ–°å¼€ç½‘æ ¼ï¼š  
    - ç»§ç»­åœ¨æ›´é«˜çš„ä»·æ ¼åŒºé—´åƒæ³¢åŠ¨ã€‚

> ç›´è§‚åœ°è¯´ï¼š  
> - ä»·æ ¼ä¸Šæ¥äº†ï¼Œ  
> - ä½ æŠŠâ€œä»“ä½é‡å¿ƒ + ç½‘æ ¼åŒºé—´â€åŒæ­¥æŠ¬é«˜ã€‚  

---

## ğŸ§© è¶‹åŠ¿è¿½è¸ªç½‘æ ¼é…ç½®æ¨¡æ¿ï¼ˆæ¦‚å¿µï¼‰

\`\`\`javascript
const TREND_FOLLOWING_GRID_CONFIG_TEMPLATE = {
  symbol: 'BTCUSDT',
  mode: 'spot',                   // å¯æ‰©å±•ä¸º futuresï¼Œä½†é£é™©æ›´é«˜
  baseLowerPrice: 28000,          // åˆå§‹ç½‘æ ¼ä¸‹è¾¹ç•Œ
  baseUpperPrice: 38000,          // åˆå§‹ç½‘æ ¼ä¸Šè¾¹ç•Œ
  baseGridCount: 30,              // åˆå§‹ç½‘æ ¼æ•°é‡
  totalInvestment: 10000,         // æ€»èµ„é‡‘ï¼ˆç¤ºæ„ï¼‰

  // è¶‹åŠ¿ç›¸å…³å‚æ•°
  trendTimeframe: '4h',           // ç”¨äºåˆ¤æ–­è¶‹åŠ¿çš„ K çº¿å‘¨æœŸ
  fastEMA: 50,                    // å¿«é€Ÿ EMA å‘¨æœŸ
  slowEMA: 100,                   // æ…¢é€Ÿ EMA å‘¨æœŸ
  trendSlopeThreshold: 0.0,       // EMA æ–œç‡é˜ˆå€¼ï¼ˆ>0 è§†ä¸ºä¸Šå‡è¶‹åŠ¿ï¼‰
  trendConfirmBars: 5,            // è‡³å°‘è¿ç»­ N æ ¹ K çº¿æ»¡è¶³è¶‹åŠ¿æ¡ä»¶æ‰è§†ä¸ºçœŸè¶‹åŠ¿

  // ç½‘æ ¼è¿ç§»å‚æ•°
  enableRecenter: true,           // æ˜¯å¦å¯ç”¨ç½‘æ ¼â€œæŠ¬å‡/é‡å¿ƒè¿ç§»â€åŠŸèƒ½
  recenterTriggerDistance: 0.1,   // å½“å‰ä»·æ ¼é«˜äºç½‘æ ¼ä¸­æ¢ 10% æ—¶è€ƒè™‘ä¸Šç§»
  recenterRangeShiftRatio: 0.15,  // æ¯æ¬¡ä¸Šç§»ç½‘æ ¼åŒºé—´çš„å¹…åº¦ï¼ˆä¾‹å¦‚æ•´ä½“ä¸Šç§» 15%ï¼‰
  lockProfitBeforeRecenter: true, // ä¸Šç§»å‰æ˜¯å¦å…ˆå¹³æ‰éƒ¨åˆ†ä»“ä½é”å®šåˆ©æ¶¦

  // é£æ§
  maxRecenterTimesPerMonth: 3,    // æ¯æœˆæœ€å¤šé‡æ„ç½‘æ ¼æ¬¡æ•°ï¼Œé¿å…é¢‘ç¹æ¬å®¶
  stopOnTrendReversal: true       // å¦‚æœè¶‹åŠ¿é€†è½¬åˆ™åœæ­¢ä¸Šç§»ï¼Œç”šè‡³å…³é—­ç½‘æ ¼
};
\`\`\`

---

## ğŸ› ï¸ ç®€æ˜“â€œæ˜¯å¦éœ€è¦ä¸Šç§»ç½‘æ ¼â€çš„åˆ¤æ–­é€»è¾‘ï¼ˆä¼ªä»£ç ï¼‰

\`\`\`javascript
/**
 * æ ¹æ®å½“å‰ä»·æ ¼ä¸å‡çº¿æƒ…å†µï¼Œåˆ¤æ–­æ˜¯å¦éœ€è¦ä¸Šç§»ç½‘æ ¼åŒºé—´
 */
function shouldRecenterGrid({
  currentPrice,
  emaFast,
  emaSlow,
  currentGridLower,
  currentGridUpper,
  recenterTriggerDistance
}) {
  const gridMid = (currentGridLower + currentGridUpper) / 2;
  const aboveMidRatio = (currentPrice - gridMid) / gridMid;

  // æ¡ä»¶ 1ï¼šä»·æ ¼å·²ç»è¿œç¦»åŸç½‘æ ¼ä¸­æ¢
  const priceFarAboveMid = aboveMidRatio >= recenterTriggerDistance;

  // æ¡ä»¶ 2ï¼šEMA æ˜¾ç¤ºå¤šå¤´è¶‹åŠ¿
  const emaTrendUp = emaFast > emaSlow;

  return priceFarAboveMid && emaTrendUp;
}
\`\`\`

çœŸå®ç­–ç•¥ä¸­ï¼Œä½ ä¼šï¼š

1. å®šæ—¶ï¼ˆä¾‹å¦‚æ¯ 4 å°æ—¶ï¼‰æ‹¿åˆ°æœ€æ–°ä»·æ ¼ã€EMA æ•°æ®ï¼›  
2. è°ƒç”¨åˆ¤æ–­å‡½æ•° \`shouldRecenterGrid\`ï¼›  
3. è‹¥è¿”å› trueï¼Œåˆ™æ‰§è¡Œï¼š  
   - å…³é—­å½“å‰ç½‘æ ¼ç­–ç•¥ï¼›  
   - å¹³æ‰éƒ¨åˆ†æŒä»“é”å®šåˆ©æ¶¦ï¼›  
   - ä»¥ä¸Šç§»åçš„æ–°åŒºé—´é‡æ–°åˆ›å»ºä¸€å¥—ç½‘æ ¼ã€‚  

---

## ğŸ“Š é£é™©ä¸æ³¨æ„äº‹é¡¹ï¼ˆ34.7ï¼‰

1. **è¶‹åŠ¿åˆ¤æ–­æ°¸è¿œä¸å¯èƒ½å®Œç¾**  
   - MA/EMA åªèƒ½ç»™å‡ºâ€œè¶‹åŠ¿æ¦‚ç‡â€ï¼Œä¸æ˜¯â€œè¶‹åŠ¿ä¿è¯â€ï¼›  
   - ä½ å°†ä¸å¯é¿å…åœ°é‡åˆ°å‡çªç ´ä¸å‡è¶‹åŠ¿ï¼›  
   - è¿ç§»æ—¶å¯èƒ½åˆšå¥½â€œè¿½åœ¨åŠå±±è…°â€ï¼Œéšåä»·æ ¼å›è½ã€‚

2. **é¢‘ç¹è¿ç§»çš„æ‘©æ“¦æˆæœ¬**  
   - æ¯ä¸€æ¬¡è¿ç§»ç½‘æ ¼åŒºé—´ï¼Œéƒ½è¦æ’¤å•ã€å¹³ä»“ã€é‡å»ºï¼›  
   - ä¼šäº§ç”Ÿé¢å¤–çš„æ‰‹ç»­è´¹ã€æ»‘ç‚¹ä¸å¿ƒåŠ›æˆæœ¬ï¼›  
   - å› æ­¤éœ€è¦å¯¹â€œæ¯æœˆæœ€å¤§è¿ç§»æ¬¡æ•°â€è®¾ä¸Šé™ã€‚

3. **é”™è¿‡å¤§å›è°ƒçš„äºŒæ¬¡ä¸Šè½¦æœºä¼š**  
   - å½“ä½ æŠ¬é«˜ç½‘æ ¼åï¼Œå¦‚æœä»·æ ¼å¤§å›è°ƒå›è€åŒºé—´ï¼Œ  
   - è€åŒºé—´çš„â€œè¶…ä½ä»·ç­¹ç â€ä½ å·²ç»å–æ‰äº†ï¼›  
   - ç­–ç•¥éœ€è¦æ¥å—è¿™ä¸ª trade-offï¼š  
     - å°‘åƒä¸€äº›æç«¯å›è°ƒä½ç‚¹ï¼Œ  
     - æ¢å–åœ¨è¶‹åŠ¿è¡Œæƒ…ä¸­èƒ½æ›´å¥½åœ°â€œè·Ÿç€èµ°â€ã€‚

---

## ğŸ¯ å®æˆ˜ Checklistï¼ˆ34.7ï¼‰

**è¶‹åŠ¿è¿½è¸ªç½‘æ ¼å¯åŠ¨å‰ï¼š**

- [ ] å·²ç»ç†Ÿæ‚‰æ™®é€šç°è´§/åˆçº¦ç½‘æ ¼çš„åŸºæœ¬é€»è¾‘ä¸é£é™©ï¼›  
- [ ] å¯¹ MA/EMA ç­‰è¶‹åŠ¿æŒ‡æ ‡æœ‰ç›´è§‚ç†è§£ï¼ˆåˆ«åªæ˜¯æŠŠå‚æ•°æŠ„è¿‡å»ï¼‰ï¼›  
- [ ] å¯¹ç›®æ ‡æ ‡çš„ï¼ˆä¾‹å¦‚ BTC/ETHï¼‰æœ‰ä¸­é•¿æœŸè®¤çŸ¥ä¸åŸºæœ¬é¢åˆ¤æ–­ã€‚

**é…ç½®å‚æ•°æ—¶ï¼š**

- [ ] åˆç†è®¾ç½®åˆå§‹ç½‘æ ¼åŒºé—´ï¼ˆèƒ½è¦†ç›–å½“å‰ä¸»è¦æ³¢åŠ¨ï¼‰ï¼›  
- [ ] è®¾å®šåˆé€‚çš„ EMA å‘¨æœŸä¸æ—¶é—´æ¡†æ¶ï¼ˆæ—¥çº¿/4H ç­‰ï¼‰ï¼›  
- [ ] å†³å®šæ¯æ¬¡ä¸Šç§»çš„å¹…åº¦ï¼ˆä¸è¦ä¸€å£æ°”æŠ¬å¤ªé«˜ï¼‰ï¼›  
- [ ] è®¾å®šæ¯æœˆæœ€å¤§è¿ç§»æ¬¡æ•°ï¼Œé¿å…è¿‡åº¦é¢‘ç¹è°ƒæ•´ã€‚

**è¿è¡Œè¿‡ç¨‹ä¸­ï¼š**

- [ ] å®šæœŸæ£€æŸ¥è¶‹åŠ¿ä¿¡å·æ˜¯å¦ä»ç„¶æœ‰æ•ˆï¼›  
- [ ] å½“ä»·æ ¼å·²è¿œç¦»åŸä¸­æ¢ä½†ä½ çŠ¹è±«è¦ä¸è¦è¿ç§»æ—¶ï¼š  
  - å…ˆç”¨å°è§„æ¨¡å®éªŒç½‘æ ¼åœ¨é«˜ä½æµ‹è¯•æ„Ÿå—ï¼›  
- [ ] å¿…è¦æ—¶ï¼Œå¯ä»¥äººå·¥å¹²é¢„ï¼š  
  - æ­¢ç›ˆä¸€éƒ¨åˆ†ã€ä¿ç•™ä¸€éƒ¨åˆ†åº•ä»“ï¼Œ  
  - å†å¯åŠ¨æ–°ä¸€è½®è¶‹åŠ¿ç½‘æ ¼ã€‚

**ç»“æŸç­–ç•¥æ—¶ï¼š**

- [ ] åœ¨è¶‹åŠ¿æ˜æ˜¾è¿›å…¥å°¾å£°æˆ–åè½¬æ—¶ï¼Œé€æ­¥å‡ä»“ã€å¹³ç½‘æ ¼ï¼›  
- [ ] å¤ç›˜ï¼š  
  - å“ªäº›è¿ç§»æ—¶æœºåæ—©/åæ™šï¼›  
  - å“ªäº›å‚æ•°å¯¹ç›ˆåˆ©è´¡çŒ®æœ€å¤§ï¼›  
  - ä¸‹ä¸€è½®æ˜¯å¦è¿˜ç”¨åŒæ ·çš„è¶‹åŠ¿æŒ‡æ ‡ä¸è¿ç§»é€»è¾‘ã€‚  

---

## âœ… å°ç»“ï¼ˆ34.7ï¼‰

è¶‹åŠ¿è¿½è¸ªç½‘æ ¼è¦è§£å†³çš„é—®é¢˜æ˜¯ï¼š

> â€œå¦‚ä½•è®©ç½‘æ ¼åœ¨è¶‹åŠ¿è¡Œæƒ…ä¸­ä¸è¢«æŠ›å¼ƒï¼Œè€Œæ˜¯è·Ÿç€è¶‹åŠ¿ä¸€èµ·å¾€ä¸Šèµ°ã€‚â€

å®ƒçš„æ ¸å¿ƒä¸æ˜¯é¢„æµ‹é¡¶éƒ¨/åº•éƒ¨ï¼Œ  
è€Œæ˜¯åœ¨â€œè¶‹åŠ¿å·²å½¢æˆâ€çš„è¿‡ç¨‹ä¸­ï¼Œ  
æœ‰èŠ‚å¥åœ°æŠŠç½‘æ ¼çš„â€œå·¥ä½œåŒºé—´â€å‘ä¸ŠæŒªï¼Œ  
æ—¢é”å®šå·²èµšåˆ°çš„é’±ï¼Œåˆç»§ç»­åƒåé¢çš„æ³¢åŠ¨ã€‚  

åœ¨ä½ çš„ç©æ³•åº“ä¸­ï¼Œå¯ä»¥æ ‡æ³¨ä¸ºï¼š

> ã€Œç½‘æ ¼è¿›é˜¶ç‰ˆï¼šé€‚åˆå·²ç»ç†Ÿæ‚‰æ™®é€šç½‘æ ¼ã€  
>  å¹¶æ„¿æ„åœ¨è¶‹åŠ¿è¯†åˆ«ä¸Šå¤šåšä¸€ç‚¹åŠŸè¯¾çš„ç”¨æˆ·ã€‚ã€  

---

`
};

/**
 * 34.8 åŒºé—´çªç ´åœæ­¢ç½‘æ ¼
 *
 * ä¸€çº§åˆ†ç±»: è¡ç”Ÿå“ç­–ç•¥ (Derivatives Strategies)
 * category_l1: derivatives
 * category: grid-trading
 * category_l2: grid-trading
 *
 * æ ¸å¿ƒï¼šä¸ºç½‘æ ¼è®¾å®šâ€œåŒºé—´è¾¹ç•Œçš„æ­¢æŸ/åœæ­¢è§„åˆ™â€ï¼Œ
 *       å½“ä»·æ ¼å¼ºåŠ¿çªç ´åŸè®¾åŒºé—´æ—¶è‡ªåŠ¨åœæ­¢ç½‘æ ¼ï¼Œé¿å…åœ¨å•è¾¹è¶‹åŠ¿é‡Œè¢«åå¤æ‰“è„¸ã€‚
 */
const STRATEGY_34_8 = {
  title:
    'åŒºé—´çªç ´åœæ­¢ç½‘æ ¼ - ä»·æ ¼èµ°å‡ºç½‘æ ¼åŒºé—´æ—¶è‡ªåŠ¨å…³åœï¼Œé¿å…å•è¾¹è¡Œæƒ…åå¤æ€ä¼¤',
  slug: 'range-breakout-stop-grid',
  summary:
    'åŒºé—´çªç ´åœæ­¢ç½‘æ ¼æ˜¯åœ¨ä¼ ç»Ÿç½‘æ ¼ç­–ç•¥ä¹‹ä¸Šå¢åŠ â€œè¾¹ç•Œæ„ŸçŸ¥â€çš„é£æ§æœºåˆ¶ï¼šå½“ä»·æ ¼å‘ä¸Šæˆ–å‘ä¸‹æœ‰æ•ˆçªç ´é¢„è®¾ç½‘æ ¼åŒºé—´ï¼ˆå¹¶åœ¨ä¸€å®šæ—¶é—´/å¹…åº¦ä¸Šå¾—åˆ°ç¡®è®¤ï¼‰æ—¶ï¼Œè‡ªåŠ¨åœæ­¢ç½‘æ ¼ç­–ç•¥ï¼Œæ’¤é”€å‰©ä½™æŒ‚å•ï¼Œå¹¶æ ¹æ®æƒ…å†µå¹³æ‰éƒ¨åˆ†æˆ–å…¨éƒ¨ä»“ä½ã€‚ç›®çš„ä¸æ˜¯èµŒçªç ´ï¼Œè€Œæ˜¯åœ¨ç½‘æ ¼åŸæœ¬å‡è®¾ä¸å†æˆç«‹æ—¶ï¼ŒåŠæ—¶é€€å‡ºï¼Œé¿å…åœ¨å•è¾¹ä¸Šæ¶¨/ä¸‹è·Œè¡Œæƒ…ä¸­è¢«åŠ¨åå¤æ¥ç›˜æˆ–æŠ›åœ¨åœ°æ¿ä»·ã€‚',
  category: 'grid-trading',
  category_l1: 'derivatives',
  category_l2: 'grid-trading',
  risk_level: 3,
  apy_min: 5,
  apy_max: 30,
  min_investment: 500,
  time_commitment:
    'ä¸»è¦åœ¨æç«¯æ³¢åŠ¨å’ŒåŒºé—´è¾¹ç¼˜é™„è¿‘éœ€è¦å…³æ³¨ï¼Œå…¶ä½™æ—¶é—´å¯ç›¸å¯¹ä½é¢‘ç»´æŠ¤',
  status: 'published',
  content: `# 34.8 åŒºé—´çªç ´åœæ­¢ç½‘æ ¼ - ä»·æ ¼èµ°å‡ºç½‘æ ¼åŒºé—´æ—¶è‡ªåŠ¨å…³åœï¼Œé¿å…å•è¾¹è¡Œæƒ…åå¤æ€ä¼¤

> ä¸€å¥è¯ç†è§£ï¼š  
> - ç½‘æ ¼çš„æœ¬è´¨æ˜¯å‡è®¾â€œä»·æ ¼åœ¨æŸä¸ªåŒºé—´é‡Œæ¥å›è·‘â€ï¼›  
> - ä¸€æ—¦ä»·æ ¼å½»åº•è·‘å‡ºè¿™ä¸ªåŒºé—´ï¼Œ  
> - ä½ éœ€è¦æ‰¿è®¤ï¼š  
>   - è¿™å¥—ç½‘æ ¼çš„å‰æå¯èƒ½å·²ç»ä¸æˆç«‹äº†ï¼Œ  
>   - æ˜¯æ—¶å€™â€œå…³æœºä¸‹ç­â€ï¼Œè€Œä¸æ˜¯ç»§ç»­åœ¨é”™è¯¯çš„åŒºé—´é‡Œç¡¬æ‰›ã€‚  

---

## ğŸ’° ç­–ç•¥æ¦‚è§ˆ

| ç»´åº¦              | å†…å®¹è¯´æ˜ |
|-------------------|----------|
| **ç­–ç•¥ç±»å‹**      | ç½‘æ ¼ç­–ç•¥çš„â€œé£æ§å¤–å£³â€ï¼Œä¸ºæ‰€æœ‰ç½‘æ ¼ç©æ³•æä¾›åŒºé—´çªç ´ä¿æŠ¤ |
| **é€‚ç”¨æ ‡çš„**      | æ‰€æœ‰é‡‡ç”¨å›ºå®šåŒºé—´ç½‘æ ¼çš„æ ‡çš„ï¼ˆBTC/ETH/ä¸»æµå±±å¯¨/å±±å¯¨é«˜æ³¢åŠ¨ç­‰ï¼‰ |
| **æ ¸å¿ƒç›®æ ‡**      | å½“ä»·æ ¼æœ‰æ•ˆçªç ´ç½‘æ ¼åŒºé—´æ—¶ï¼Œè‡ªåŠ¨åœæ­¢ç½‘æ ¼å¹¶æ‰§è¡Œé¢„è®¾é£æ§åŠ¨ä½œ |
| **æ”¶ç›Šå®šä½**      | æœ¬èº«ä¸ç›´æ¥åˆ›é€ æ”¶ç›Šï¼Œè€Œæ˜¯å¸®åŠ©ä¿ä½åŸæœ¬ç½‘æ ¼ç­–ç•¥èµšåˆ°çš„é’±å’Œæœ¬é‡‘ |
| **ä¸»è¦é£é™©**      | æ­¢æŸè¿‡æ—©å¯¼è‡´â€œå‡çªç ´è¢«æ´—å‡ºå±€â€ã€æ­¢æŸè¿‡è¿Ÿå¯¼è‡´æŸå¤±æ‰©å¤§ |

---

## ğŸ“– åœºæ™¯æ•…äº‹ï¼šå•è¾¹è¡Œæƒ…æ˜¯ç½‘æ ¼çš„â€œå¤©æ•Œâ€

ä½ åœ¨ BTC 28k~38k åŒºé—´éƒ¨ç½²äº†ä¸€å¥—ç½‘æ ¼ï¼š

- åœ¨æ­£å¸¸éœ‡è¡æœŸé—´ï¼Œç­–ç•¥è¡¨ç°ä¸é”™ï¼›  
- ä½†æ˜¯ï¼Œå½“æŸä¸€å¤©è¡Œæƒ…çªç„¶ï¼š

  - ä» 28k è¿ç»­æ€åˆ° 24k å†åˆ° 20kï¼›  
  - æˆ–ä» 38k è¿ç»­æ‹‰åˆ° 42k å†åˆ° 48kï¼›  

ä½ çš„ç½‘æ ¼ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ

- **ä¸‹è·Œå•è¾¹ï¼š**  
  - ä¸€è·¯ä¸æ–­ä¹°å…¥ï¼š  
    - ä½ ä»¥ä¸ºæ˜¯â€œæŠ„åº•â€ï¼Œ  
    - å®é™…ä¸Šæ˜¯åœ¨â€œæ¥é£åˆ€â€ï¼›  
  - åº•éƒ¨è¿Ÿè¿Ÿä¸æ¥ï¼Œä½ çš„å­å¼¹è¶Šæ¥è¶Šå°‘ï¼Œæµ®äºè¶Šæ¥è¶Šå¤§ï¼›  

- **ä¸Šæ¶¨å•è¾¹ï¼š**  
  - ä¸€è·¯ä¸æ–­å–å‡ºï¼š  
    - ä½ ä»¥ä¸ºæ˜¯â€œé”å®šåˆ©æ¶¦â€ï¼Œ  
    - å®é™…ä¸Šæ˜¯åœ¨â€œæå‰ä¸‹è½¦â€ï¼›  
  - è¶Šå–è¶Šå°‘ï¼Œåç»­ä¸»å‡æµªå…¨åœ¨è½¦å¤–ç›®é€ã€‚

ä½ äº‹åä¼šæƒ³ï¼š

> â€œå¦‚æœåœ¨ä»·æ ¼çœŸæ­£èµ°å‡ºæˆ‘åŸæ¥è®¾å®šçš„åŒºé—´æ—¶ï¼Œ  
>  ç½‘æ ¼å¯ä»¥è‡ªåŠ¨åœä¸‹æ¥ï¼Œ  
>  ä¸å†ç¡¬æŒ‰åŸæ¥çš„å‡è®¾æ“ä½œï¼Œ  
>  æ˜¯ä¸æ˜¯æŸå¤±ä¼šå°å¾ˆå¤šï¼Ÿâ€

**åŒºé—´çªç ´åœæ­¢ç½‘æ ¼**å°±æ˜¯ä¸ºæ­¤è®¾è®¡çš„ï¼š

- å®ƒä¸æ˜¯ä¸€ä¸ª**å•ç‹¬èµšé’±çš„ç­–ç•¥**ï¼Œ  
- è€Œæ˜¯æ‰€æœ‰ç½‘æ ¼ç­–ç•¥çš„â€œæŠ¤åŸæ²³æ¨¡å—â€ï¼š  
  - è´Ÿè´£åœ¨å‡è®¾å¤±æ•ˆæ—¶æ‹‰é—¸åœæœºï¼Œ  
  - é˜²æ­¢é”™è¯¯é€»è¾‘ç»§ç»­æ‰©å¤§äºæŸã€‚

---

## ğŸ§  åŒºé—´çªç ´çš„â€œæœ‰æ•ˆæ€§â€åˆ¤æ–­

å…³é”®é—®é¢˜ï¼š

> â€œä»€ä¹ˆå«çœŸæ­£çªç ´ï¼Ÿ  
>  ä¸èƒ½åªæ˜¯å½±çº¿åˆºä¸€ä¸‹ï¼Œå°±æŠŠç½‘æ ¼å…³äº†ã€‚â€  

å¸¸è§å‡ ç§åˆ¤æ–­æ–¹å¼ï¼ˆå¯ä»¥å åŠ ä½¿ç”¨ï¼‰ï¼š

1. **ä»·æ ¼è¶…å‡ºè¾¹ç•Œä¸€å®šç™¾åˆ†æ¯”**  
   - ä¾‹å¦‚ï¼š  
     - ä¸Šæ²¿ 38kï¼Œè¢«çªç ´åˆ° 39kï¼ˆâ‰ˆ 2.6%ï¼‰ï¼Œ  
     - ä¸‹æ²¿ 28kï¼Œè¢«è·Œç ´åˆ° 27kï¼ˆâ‰ˆ -3.5%ï¼‰ï¼›  
   - è®¾å®šä¸€ä¸ªâ€œè¾¹ç•Œç¼“å†²åŒºâ€ï¼ˆbufferï¼‰ï¼Œä¾‹å¦‚ï¼š  
     - çªç ´å¹…åº¦ â‰¥ 2%~3%ã€‚

2. **åœ¨è¾¹ç•Œå¤–åœç•™ä¸€å®šæ—¶é—´**  
   - ä¾‹å¦‚ï¼š  
     - ä»·æ ¼åœ¨ä¸Šæ²¿ä¹‹ä¸Šè¿ç»­æ”¶ 3 æ ¹ 15min K çº¿ï¼›  
     - æˆ–è€…åœ¨æ—¥çº¿çº§åˆ«æ”¶ä¸€æ ¹æ˜æ˜¾çªç ´ K çº¿å¹¶ç«™ç¨³ã€‚  

3. **æˆäº¤é‡/æ³¢åŠ¨é…åˆ**ï¼ˆå¯é€‰ï¼‰  
   - çªç ´æ—¶ä¼´éšæˆäº¤é‡æ”¾å¤§ã€æ³¢åŠ¨åŠ å‰§ï¼›  
   - è¿›ä¸€æ­¥ç¡®è®¤è¿™æ˜¯ä¸€æ¬¡â€œçœŸçªç ´â€ï¼Œè€Œä¸æ˜¯å‡åˆºç ´ã€‚

ä½ å¯ä»¥ç»„åˆä¸Šè¿°æ¡ä»¶ï¼š

- \`çªç ´å¹…åº¦ >= X%\` ä¸” \`åœ¨è¾¹ç•Œå¤–æŒç»­æ—¶é—´ >= Y åˆ†é’Ÿ/æ ¹ K\`  
- æ»¡è¶³æ—¶ â†’ åˆ¤å®šä¸ºâ€œæœ‰æ•ˆçªç ´â€ï¼Œè§¦å‘ç½‘æ ¼åœæ­¢é€»è¾‘ã€‚

---

## ğŸ§© åŒºé—´çªç ´åœæ­¢ç½‘æ ¼é…ç½®æ¨¡æ¿ï¼ˆæ¦‚å¿µï¼‰

\`\`\`javascript
const RANGE_BREAK_STOP_CONFIG_TEMPLATE = {
  symbol: 'BTCUSDT',
  mode: 'spot',                      // åŒä¸»ç½‘æ ¼ç­–ç•¥ï¼Œå¯ä¸º spot/futures
  gridLower: 28000,                  // ç½‘æ ¼åŒºé—´ä¸‹è¾¹ç•Œ
  gridUpper: 38000,                  // ç½‘æ ¼åŒºé—´ä¸Šè¾¹ç•Œ

  // çªç ´åˆ¤å®šå‚æ•°
  upperBreakoutBuffer: 0.02,         // å‘ä¸Šçªç ´ç¼“å†²ï¼šé«˜äºä¸Šè¾¹ç•Œ 2% ä»¥ä¸Šæ‰åˆ¤å®šçªç ´
  lowerBreakoutBuffer: 0.02,         // å‘ä¸‹çªç ´ç¼“å†²ï¼šä½äºä¸‹è¾¹ç•Œ 2% ä»¥ä¸Šæ‰åˆ¤å®šçªç ´
  minBreakoutDurationMinutes: 30,    // ä»·æ ¼æŒç»­åœ¨åŒºé—´å¤–è‡³å°‘ 30 åˆ†é’Ÿ
  confirmWithCandleClose: true,      // æ˜¯å¦è¦æ±‚è‡³å°‘ä¸€æ ¹ K çº¿æ”¶ç›˜åœ¨åŒºé—´å¤–

  // çªç ´åçš„æ“ä½œ
  onBreakoutAction: 'stop_and_review', // 'stop_only', 'stop_and_close', 'stop_and_review'
  closePositionRatioOnBreakout: 0.5,   // è‹¥é€‰æ‹©éƒ¨åˆ†å¹³ä»“ï¼Œé»˜è®¤å¹³æ‰ 50% ä»“ä½
  notifyUser: true                     // è§¦å‘æ—¶æ˜¯å¦å‘é€é€šçŸ¥ï¼ˆé‚®ä»¶/Telegram ç­‰ï¼‰
};
\`\`\`

---

## ğŸ› ï¸ ç®€æ˜“çªç ´æ£€æµ‹é€»è¾‘ï¼ˆä¼ªä»£ç ï¼‰

\`\`\`javascript
function detectRangeBreakout({
  currentPrice,
  gridLower,
  gridUpper,
  upperBreakoutBuffer,
  lowerBreakoutBuffer
}) {
  const upperThreshold = gridUpper * (1 + upperBreakoutBuffer);
  const lowerThreshold = gridLower * (1 - lowerBreakoutBuffer);

  if (currentPrice > upperThreshold) {
    return 'up_break';   // å‘ä¸Šçªç ´
  }
  if (currentPrice < lowerThreshold) {
    return 'down_break'; // å‘ä¸‹çªç ´
  }
  return 'none';
}
\`\`\`

åœ¨å®ç›˜ä¸­ï¼š

1. ä½ ä¼šåœ¨æ¯ä¸€æ¬¡ä»·æ ¼æ›´æ–°æ—¶è°ƒç”¨ \`detectRangeBreakout\`ï¼›  
2. å¦‚æœè¿”å› 'up_break' æˆ– 'down_break'ï¼Œ  
   - è®°å½•â€œç–‘ä¼¼çªç ´â€çš„å¼€å§‹æ—¶é—´ï¼›  
3. è‹¥ä»·æ ¼åœ¨ä¸€å®šæ—¶é—´çª—å£å†…æŒç»­ç»´æŒåœ¨çªç ´çŠ¶æ€ï¼Œ  
   - å†é€šè¿‡ K çº¿æ”¶ç›˜ç¡®è®¤ï¼›  
4. æœ€ç»ˆå†è§¦å‘â€œåœæ­¢ç½‘æ ¼ + å¯é€‰å¹³ä»“â€çš„åŠ¨ä½œã€‚  

---

## ğŸ§± çªç ´åçš„è¡Œä¸ºç­–ç•¥ï¼šä¸‰ç§æ¨¡å¼

1. **stop_onlyï¼ˆåªåœæ­¢ç½‘æ ¼ï¼Œä¸å¹³ä»“ï¼‰**  
   - é€‚åˆï¼š  
     - ä½ è®¤ä¸ºâ€œç½‘æ ¼é€»è¾‘å¤±æ•ˆäº†ï¼Œä½†æŒä»“é€»è¾‘ä»ç„¶æˆç«‹â€ï¼›  
   - è¡Œä¸ºï¼š  
     - æ’¤æ‰æ‰€æœ‰å‰©ä½™ç½‘æ ¼æŒ‚å•ï¼›  
     - ä¿ç•™ç°æœ‰ä»“ä½ä¸åŠ¨ï¼Œ  
     - äº¤ç”±ä½ æ‰‹åŠ¨ç®¡ç†æˆ–åˆ‡æ¢åˆ°å…¶ä»–ç­–ç•¥ã€‚  

2. **stop_and_closeï¼ˆåœæ­¢ç½‘æ ¼ + å¹³æ‰å¤§éƒ¨åˆ†ä»“ä½ï¼‰**  
   - é€‚åˆï¼š  
     - ä½ è®¤ä¸ºâ€œè¿™ç¬”ç½‘æ ¼çš„æ•´ä¸ªå‡è®¾éƒ½é”™äº†/ç»“æŸäº†â€ï¼›  
   - è¡Œä¸ºï¼š  
     - æ’¤æ‰æ‰€æœ‰æŒ‚å•ï¼›  
     - éƒ¨åˆ†/å…¨éƒ¨å¸‚ä»·å¹³ä»“ï¼Œé”å®šå½“å‰ç›ˆäºï¼›  
     - å®Œå…¨ç»“æŸæœ¬æ¬¡ç½‘æ ¼ç­–ç•¥ã€‚  

3. **stop_and_reviewï¼ˆåœæ­¢ç½‘æ ¼ + äººå·¥å¤ç›˜å†³ç­–ï¼‰**  
   - é€‚åˆï¼š  
     - ä½ å°Šé‡ç³»ç»Ÿçš„â€œåŒºé—´å¤±æ•ˆâ€åˆ¤æ–­ï¼Œ  
     - ä½†å¸Œæœ›æœ€ç»ˆå¹³ä»“/ä¿ç•™å†³ç­–ç”±è‡ªå·±åšï¼›  
   - è¡Œä¸ºï¼š  
     - æ’¤æ‰æ‰€æœ‰æŒ‚å•ï¼›  
     - ä¿ç•™ä»“ä½ï¼Œä½†å‘å‡ºâ€œç­–ç•¥ä¸­æ–­ï¼Œéœ€è¦äººå·¥å†³ç­–â€çš„é€šçŸ¥ï¼›  
     - ç”±ä½ ç»“åˆå®è§‚/æ¶ˆæ¯é¢/é“¾ä¸Šæ•°æ®åšåç»­å®‰æ’ã€‚  

---

## ğŸ“Š é£æ§è®¾è®¡ç¤ºä¾‹ï¼ˆ34.8ï¼‰

\`\`\`javascript
const RANGE_BREAK_STOP_RISK_CONFIG = {
  MAX_SLIPPAGE_ON_FORCE_CLOSE: 0.003, // å¼ºåˆ¶å¹³ä»“æ—¶å…è®¸çš„æœ€å¤§æ»‘ç‚¹ 0.3%
  MAX_GAP_HOURS_WITHOUT_CHECK: 1,     // æœ€é•¿ä¸æ£€æŸ¥ä»·æ ¼çš„æ—¶é—´é—´éš”ï¼ˆ1 å°æ—¶ï¼‰
  ENABLE_HARD_STOP_LOSS_BELOW_RANGE: true, // æ˜¯å¦åœ¨æç«¯ä¸‹ç ´æ—¶ç›´æ¥ç¡¬æ­¢æŸ
  HARD_STOP_LOSS_MULTIPLIER: 0.9,     // è‹¥ä»·æ ¼ä½äºä¸‹è¾¹ç•Œçš„ 90% ä»¥ä¸‹ï¼Œç›´æ¥æ‰§è¡Œç¡¬æ­¢æŸæ–¹æ¡ˆ
  LOG_ALL_BREAK_EVENTS: true          // è®°å½•æ‰€æœ‰çªç ´äº‹ä»¶æ—¥å¿—ï¼Œä¾¿äºå¤ç›˜
};
\`\`\`

---

## ğŸ¯ å®æˆ˜ Checklistï¼ˆ34.8ï¼‰

**å¯ç”¨åŒºé—´çªç ´åœæ­¢å‰ï¼š**

- [ ] ä½ å·²ç»ä¸ºç½‘æ ¼ç­–ç•¥æ˜ç¡®è®¾å®šäº†ä¸Š/ä¸‹è¾¹ç•Œï¼›  
- [ ] ä½ æ¸…æ¥šè‡ªå·±çš„â€œåŒºé—´é€»è¾‘â€æ˜¯ä»€ä¹ˆï¼ˆä¾‹å¦‚ï¼šæŸæ®µç›˜æ•´ã€æŸä¸ªä¼°å€¼åŒºé—´ï¼‰ï¼›  
- [ ] ä½ èƒ½æ¥å—ï¼š  
  - è¢«â€œå‡çªç ´â€æ´—å‡ºå»çš„æƒ…å†µï¼›  
  - ä½†ä½ æ›´ä¸èƒ½æ¥å—åœ¨çœŸå•è¾¹è¡Œæƒ…é‡Œè¢«ç½‘æ ¼åå¤æŠ˜ç£¨ã€‚

**é…ç½®çªç ´å‚æ•°æ—¶ï¼š**

- [ ] è®¾å®šåˆç†çš„ \`upperBreakoutBuffer\` å’Œ \`lowerBreakoutBuffer\`ï¼ˆä¾‹å¦‚ 2%-3%ï¼‰ï¼›  
- [ ] è®¾å®š â€œæŒç»­æ—¶é—´ + K çº¿æ”¶ç›˜â€ ç»„åˆæ¡ä»¶æ¥å‡å°‘è¯¯åˆ¤ï¼›  
- [ ] å†³å®šçªç ´åçš„è¡Œä¸ºæ¨¡å¼ï¼ˆåªåœç½‘æ ¼ / åœç½‘æ ¼ + å¹³ä»“ / åœç½‘æ ¼ + äººå·¥å†³ç­–ï¼‰ã€‚

**è¿è¡Œè¿‡ç¨‹ä¸­ï¼š**

- [ ] ç›‘æ§çªç ´æ£€æµ‹æ¨¡å—æ˜¯å¦æ­£å¸¸å·¥ä½œï¼ˆå¯åœ¨æµ‹è¯•ç¯å¢ƒä¸­å…ˆè·‘ï¼‰ï¼›  
- [ ] åœ¨é¦–æ¬¡çœŸå®è§¦å‘æ—¶ï¼Œæ ¼å¤–å…³æ³¨æ‰§è¡Œç»†èŠ‚ï¼ˆæ’¤å•æ˜¯å¦æˆåŠŸã€å¹³ä»“ä»·æ ¼æ˜¯å¦åˆç†ï¼‰ï¼›  
- [ ] ç¡®ä¿ä½ èƒ½æ”¶åˆ°é€šçŸ¥ï¼ˆé‚®ä»¶/Telegram/çŸ­ä¿¡ç­‰ï¼‰ã€‚

**ç­–ç•¥ç»“æŸä¸å¤ç›˜ï¼š**

- [ ] æ¯æ¬¡å› ä¸ºçªç ´è€Œåœæ­¢ç½‘æ ¼åï¼Œå†™ä¸‹ï¼š  
  - è¿™æ˜¯â€œçœŸçªç ´â€è¿˜æ˜¯â€œå‡çªç ´â€ï¼›  
  - è‹¥æ˜¯å‡çªç ´ï¼Œæ˜¯å¦å¯ä»¥é€‚å½“æ”¾å®½åˆ¤å®šå‚æ•°ï¼›  
  - è‹¥æ˜¯çœŸçªç ´ï¼Œæ˜¯å¦å› åœæ­¢åŠæ—¶è€Œå‡å°‘äº†å¤§æŸå¤±ï¼›  
- [ ] æ ¹æ®å¤šæ¬¡ç»éªŒè°ƒæ•´ï¼š  
  - ç¼“å†²ç™¾åˆ†æ¯”  
  - æŒç»­æ—¶é—´  
  - åç»­è¡Œä¸ºæ¨¡å¼ã€‚  

---

## âœ… å°ç»“ï¼ˆ34.8ï¼‰

**åŒºé—´çªç ´åœæ­¢ç½‘æ ¼**çš„å®šä½æ˜¯ï¼š

> â€œæ‰€æœ‰ç½‘æ ¼ç­–ç•¥å¤–é¢çš„ä¸€å±‚å®‰å…¨æ°”å›Šâ€ã€‚  

å®ƒå¹¶ä¸æ˜¯ç”¨æ¥èµšé’±çš„ï¼Œè€Œæ˜¯ç”¨æ¥ï¼š

- åœ¨ç½‘æ ¼å‡è®¾ä¸å†æˆç«‹æ—¶æé†’ä½ ï¼š  
  - â€œè¿™å±€æ¸¸æˆè§„åˆ™å˜äº†ï¼Œå…ˆç«™èµ·æ¥ç¦»å¼€ç‰Œæ¡Œâ€ï¼›  
- å¸®ä½ æ§åˆ¶æœ€åæƒ…å†µï¼Œé¿å…ï¼š  
  - ä¸‹è·Œæ—¶è¶Šä¹°è¶Šå¤šã€è¢«å¥—åˆ°æ€€ç–‘äººç”Ÿï¼›  
  - ä¸Šæ¶¨æ—¶è¶Šå–è¶Šç©ºï¼Œæœ€åä¸€åœ°é¸¡æ¯›ã€‚

åœ¨ä½ çš„ç©æ³•åº“ä¸­ï¼Œå¯ä»¥æŠŠå®ƒæ ‡è®°ä¸ºï¼š

> ã€Œæ¨èä¸æ‰€æœ‰å›ºå®šåŒºé—´ç½‘æ ¼ç­–ç•¥æ­é…ä½¿ç”¨çš„é£é™©ç®¡ç†æ¨¡å—ã€ã€‚  

---

`
};

/**
 * ä¸Šä¼  34.7 & 34.8 ç­–ç•¥åˆ° Directus
 */
async function uploadStrategies() {
  const DIRECTUS_URL = 'http://localhost:8055';

  console.log(
    'å¼€å§‹ä¸Šä¼ ç­–ç•¥ 34.7 (è¶‹åŠ¿è¿½è¸ªç½‘æ ¼) å’Œ 34.8 (åŒºé—´çªç ´åœæ­¢ç½‘æ ¼)...\n'
  );

  try {
    const { execSync } = require('child_process');
    const tokenOutput = execSync('./get-new-directus-token.sh').toString();
    const tokenMatch = tokenOutput.match(/DIRECTUS_ADMIN_TOKEN=(.+)/);

    if (!tokenMatch) {
      throw new Error('Failed to get admin token');
    }

    const ADMIN_TOKEN = tokenMatch[1].trim();

    const headers = {
      Authorization: `Bearer ${ADMIN_TOKEN}`,
      'Content-Type': 'application/json'
    };

    console.log('ä¸Šä¼ ç­–ç•¥ 34.7: è¶‹åŠ¿è¿½è¸ªç½‘æ ¼...');
    await axios.post(`${DIRECTUS_URL}/items/strategies`, STRATEGY_34_7, {
      headers
    });
    console.log('âœ… ç­–ç•¥ 34.7 ä¸Šä¼ æˆåŠŸ\n');

    console.log('ä¸Šä¼ ç­–ç•¥ 34.8: åŒºé—´çªç ´åœæ­¢ç½‘æ ¼...');
    await axios.post(`${DIRECTUS_URL}/items/strategies`, STRATEGY_34_8, {
      headers
    });
    console.log('âœ… ç­–ç•¥ 34.8 ä¸Šä¼ æˆåŠŸ\n');

    const response = await axios.get(
      `${DIRECTUS_URL}/items/strategies?limit=1&meta=total_count`,
      { headers }
    );
    console.log(
      `âœ… æ•°æ®åº“ä¸­ç°æœ‰ç­–ç•¥æ€»æ•°: ${response.data.meta.total_count}`
    );
  } catch (error) {
    console.error('âŒ ä¸Šä¼ å¤±è´¥:', error.response?.data || error.message);
    process.exit(1);
  }
}

// è‹¥è¦åœ¨ Node ä¸­ç›´æ¥æ‰§è¡Œæœ¬æ–‡ä»¶å†™å…¥ç­–ç•¥ï¼Œè¯·å–æ¶ˆä¸‹é¢ä¸€è¡Œæ³¨é‡Šï¼š
uploadStrategies();
